<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
<meta content='initial-scale=1' name='viewport'>
<title>Performance Co-Pilot</title>
<link href='/assets/css/screen.css' media='all' rel='stylesheet' type='text/css'>
<link href='/assets/css/master.css' media='all' rel='stylesheet' type='text/css'>
<link href='/images/pcp.ico' rel='shortcut icon' type='image/ico'>

</head>
<body>
<header class='global-header'>
<div class='row'>
<h1 class='global-logo colspan12-6 colspan8-4 colspan6-3 colspan2-1 as-grid'>
<a href='/index.html'>Performance Co-Pilot</a>
</h1>
<nav class='global-header__navigation colspan12-6 colspan8-6 colspan6-4 colspan2-1 as-grid'>
<ul>
<li>
<a href='/features.html'>Features</a>
</li>
<li>
<a href='/documentation.html'>Documentation</a>
</li>
<li>
<a href='/download.html'>Download</a>
</li>
<li>
<a href='/community.html'>Get Involved</a>
</li>
</ul>
</nav>
</div>
</header>

<div class='site-content'>
<div class='how-to is-typeset'>
<div class='row-parent'>
<div class='row'>
<div class='manpage'>
ï»¿
 <h1>
  PMSNAP
 </h1>
 Section: User Commands  (1)
 <br/>
 Updated:
 <br/>
 <a href="#index">
  Index
 </a>
 <a href="/man">
  Return to Main Contents
 </a>
 <hr/>
 <a name="lbAB">
 </a>
 <h2>
  NAME
 </h2>
 <b>
  pmsnap
 </b>
 - generate performance summary snapshot images
 <a name="lbAC">
 </a>
 <h2>
  SYNOPSIS
 </h2>
 <b>
  $PCP_BINADM_DIR/pmsnap
 </b>
 [
 <b>
  -NV?
 </b>
 ]
[
 <b>
  -c
 </b>
 <i>
  configs
 </i>
 ]
[
 <b>
  -C
 </b>
 <i>
  dir
 </i>
 ]
[
 <b>
  -f
 </b>
 <i>
  format
 </i>
 ]
[
 <b>
  -n
 </b>
 <i>
  names
 </i>
 ]
[
 <b>
  -o
 </b>
 <i>
  dir
 </i>
 ]
 <a name="lbAD">
 </a>
 <h2>
  DESCRIPTION
 </h2>
 <b>
  pmsnap
 </b>
 is a shell script
that is normally run periodically from
 <b>
  <a href="http://man7.org/linux/man-pages/man1/crontab.1.html">
   crontab
  </a>
 </b>
 (1)

to generate graphic images of
 <b>
  <a href="/man/man1/pmchart.1.html">
   pmchart
  </a>
 </b>
 (1)

performance charts.
These images can be in any of the supported
 <b>
  pmchart
 </b>
 formats, including
 <i>
  png
 </i>
 ,
 <i>
  bmp
 </i>
 ,

and
 <i>
  jpeg
 </i>
 ,

and may be incorporated into the content offered by the local web server.
By default
 <b>
  pmsnap
 </b>
 generates no textual output unless some error or warning condition is
encountered.
 <p>
  <b>
   pmsnap
  </b>
  generates images according to its control file,
  <b>
   $PCP_PMSNAPCONTROL_PATH
  </b>
  (or
  <b>
   dir/control
  </b>
  if the
  <b>
   -C
  </b>
  option is specified),
and uses archive logs created by
  <b>
   <a href="/man/man1/pmlogger.1.html">
    pmlogger
   </a>
  </b>
  (1)

or PCP archive folios created by
  <b>
   <a href="/man/man1/pmafm.1.html">
    pmafm
   </a>
  </b>
  (1)

and
  <b>
   <a href="/man/man1/pmlogger_check.1.html">
    pmlogger_check
   </a>
  </b>
  (1).

Before attempting to configure
  <b>
   pmsnap
  </b>
  ,

it is strongly recommended that
  <b>
   pmlogger
  </b>
  be configured according to the descriptions in
  <b>
   <a href="/man/man1/pmlogger_daily.1.html">
    pmlogger_daily
   </a>
  </b>
  (1),
  <b>
   <a href="/man/man1/pmlogger_check.1.html">
    pmlogger_check
   </a>
  </b>
  (1)

and
  <b>
   <a href="/man/man1/pmlogger.1.html">
    pmlogger
   </a>
  </b>
  (1).
 </p>
 <p>
  Once
  <b>
   pmlogger
  </b>
  has been configured,
it is necessary to configure
  <b>
   pmsnap
  </b>
  as follows;
 </p>
 <dl compact="">
  <dt>
   1.
  </dt>
  <dd>
   Edit the control file
   <b>
    $PCP_PMSNAPCONTROL_PATH
   </b>
   .

The syntax of this file is described in the comment at the head of the file
and an example is supplied for one and twelve hour "Summary" performance charts
for the local host.
Suitable arguments for
   <b>
    pmchart
   </b>
   are also described in the comment.
The user should consult
   <b>
    pmchart
   </b>
   for further details.
Note that when
   <b>
    pmsnap
   </b>
   is run, it globally substitutes the string
   <b>
    LOCALHOSTNAME
   </b>
   with the name of the local host in the control file.
  </dd>
  <dt>
   2.
  </dt>
  <dd>
   Test the configuration by running
   <center>
    <b>
     $PCP_BINADM_DIR/pmsnap
    </b>
    .
    <br/>
   </center>
   Without any arguments
   <b>
    pmsnap
   </b>
   will process every non-comment line in
   <b>
    $PCP_PMSNAPCONTROL_PATH
   </b>
   .

The output images will be placed in the files named
in the first field of each line in the control file, with the file format
appended if necessary.
If these file names do not start with
   <b>
    /
   </b>
   or
   <b>
    .
   </b>
   then they are assumed relative to
   <i>
    dir
   </i>
   ,

as specified with the
   <b>
    -o
   </b>
   option.
The default
   <i>
    dir
   </i>
   is the current directory.
Note that if
   <b>
    pmlogger
   </b>
   has only been recently started (within about the last 15 minutes),
snapshot images may not be produced and no error
messages will be issued - the reason is that
   <b>
    pmchart
   </b>
   can not use very short archives
and hence, neither can
   <b>
    pmsnap
   </b>
   .

For debugging purposes the
   <b>
    -V
   </b>
   flag should be used.
  </dd>
  <dt>
   3.
  </dt>
  <dd>
   Add an appropriate entry for
   <b>
    pmsnap
   </b>
   in the
   <b>
    root
   </b>
   user's
   <b>
    crontab
   </b>
   .

An example is supplied in
   <b>
    $PCP_VAR_DIR/config/pmlogger/crontab
   </b>
   .
  </dd>
  <dt>
   4.
  </dt>
  <dd>
   Incorporate the
   <b>
    pmsnap
   </b>
   images into the local WWW content.
Usually, WWW pages use images that are relative to a particular document root,
so it is often convenient to use the
   <b>
    -o
   </b>
   command line option to specify a sub-directory of the local WWW content,
and then create a web page in this directory that shows the
snapshot images with text and other content appropriate to the local
environment.
  </dd>
 </dl>
 <p>
  A sample HTML page, suitable for the Summary snapshot may be found in
  <b>
   $PCP_VAR_DIR/config/pmsnap/Summary.html
  </b>
  .
 </p>
 <p>
  Although
  <b>
   pmsnap
  </b>
  attempts to flush
  <b>
   <a href="http://man7.org/linux/man-pages/man3/stdio.3.html">
    stdio
   </a>
  </b>
  (3)

output buffers in the relevant
  <b>
   pmlogger
  </b>
  processes before generating snapshots images,
this may fail for assorted reasons and no error message will be given.
 </p>
 <p>
  <b>
   pmsnap
  </b>
  should not be invoked immediately after
  <b>
   pmlogger_daily
  </b>
  has rolled the logs because the new archive logs will be too short
to obtain meaningful results.
Note however that
  <b>
   pmsnap
  </b>
  will not report errors from
  <b>
   pmchart
  </b>
  about not being able to comply with the
  <b>
   -A
  </b>
  option on very short archives.
In these cases no error will be reported
and no output images will be produced.
  <a name="lbAE">
  </a>
 </p>
 <h2>
  OPTIONS
 </h2>
 The available command line options are:
 <dl compact="">
  <dt>
   <b>
    -c
   </b>
   <i>
    config-pattern
   </i>
  </dt>
  <dd>
   Only process lines in the control file
which match the
   <i>
    config-pattern
   </i>
   regular expression
in the
   <b>
    Config
   </b>
   column.
  </dd>
  <dt>
   <b>
    -C
   </b>
   <i>
    dir
   </i>
  </dt>
  <dd>
   The
   <b>
    control
   </b>
   file is located in the directory
   <i>
    dir
   </i>
   rather than in the default
   <b>
    $PCP_PMSNAPCONTROL_PATH
   </b>
   location.
  </dd>
  <dt>
   <b>
    -f
   </b>
   <i>
    format
   </i>
  </dt>
  <dd>
   Set output image format.
The defaults format is
   <b>
    png
   </b>
   .
  </dd>
  <dt>
   <b>
    -n
   </b>
   <i>
    name-pattern
   </i>
  </dt>
  <dd>
   Only process lines in the control file
which match the
   <i>
    name-pattern
   </i>
   regular expression (see
   <b>
    <a href="http://man7.org/linux/man-pages/man1/egrep.1.html">
     egrep
    </a>
   </b>
   (1))

in the
   <b>
    Name
   </b>
   column.
  </dd>
  <dt>
   <b>
    -N
   </b>
  </dt>
  <dd>
   Enable a ``show me'' mode, where the actions are echoed,
but not executed, in the style of ``make -n''.
Using
   <b>
    -N
   </b>
   in conjunction with
   <b>
    -V
   </b>
   maximizes the diagnostic capabilities for debugging.
  </dd>
  <dt>
   <b>
    -o
   </b>
   <i>
    dir
   </i>
  </dt>
  <dd>
   The output images having file names which do not start
with
   <b>
    /
   </b>
   or
   <b>
    .
   </b>
   will be placed in a directory relative to
   <i>
    dir
   </i>
   ,

otherwise the output directory
is relative to the current directory (i.e. the default
value for
   <i>
    dir
   </i>
   is
   <b>
    ./
   </b>
   ).

Note that
   <i>
    dir
   </i>
   must be a writable directory path
and may be on an NFS or CIFS file system.
  </dd>
  <dt>
   <b>
    -V
   </b>
  </dt>
  <dd>
   Enable verbose mode.
  </dd>
  <dt>
   <b>
    -?
   </b>
  </dt>
  <dd>
   Display usage message and exit.
  </dd>
 </dl>
 <p>
  When either
  <b>
   -n
  </b>
  or
  <b>
   -c
  </b>
  are used,
  <b>
   pmsnap
  </b>
  will only process lines in the control file
which match all the supplied patterns.
If no patterns are given,
then all lines will be processed.
These arguments allow multiple entries for
  <b>
   pmsnap
  </b>
  in
  <b>
   crontab
  </b>
  so that different performance summary images can be generated
at different times or with different frequencies.
  <a name="lbAF">
  </a>
 </p>
 <h2>
  FILES
 </h2>
 <dl compact="">
  <dt>
   <i>
    $PCP_PMSNAPCONTROL_PATH
   </i>
  </dt>
  <dd>
   <b>
    pmsnap
   </b>
   control file
  </dd>
  <dt>
   <i>
    $PCP_VAR_DIR/config/pmsnap/Summary
   </i>
  </dt>
  <dd>
   summary view for
   <b>
    pmchart
   </b>
  </dd>
  <dt>
   <i>
    $PCP_VAR_DIR/config/pmsnap/Summary.html
   </i>
  </dt>
  <dd>
   sample HTML page for summary snapshot
  </dd>
  <dt>
   <i>
    $PCP_LOG_DIR/pmlogger/&lt;hostname&gt;/Latest
   </i>
  </dt>
  <dd>
   PCP archive folio for the host
   <i>
    hostname
   </i>
   ,

as generated by
   <b>
    pmlogger_check
   </b>
  </dd>
  <dt>
   <i>
    $PCP_VAR_DIR/config/pmlogger/crontab
   </i>
  </dt>
  <dd>
   example
   <b>
    crontab
   </b>
   entry
  </dd>
 </dl>
 <a name="lbAG">
 </a>
 <h2>
  SEE ALSO
 </h2>
 <b>
  <a href="http://man7.org/linux/man-pages/man1/cron.1.html">
   cron
  </a>
 </b>
 (1),
 <b>
  <a href="http://man7.org/linux/man-pages/man1/crontab.1.html">
   crontab
  </a>
 </b>
 (1),
 <b>
  <a href="http://man7.org/linux/man-pages/man1/egrep.1.html">
   egrep
  </a>
 </b>
 (1),
 <b>
  <a href="/man/man1/pmafm.1.html">
   pmafm
  </a>
 </b>
 (1),
 <b>
  <a href="/man/man1/pmchart.1.html">
   pmchart
  </a>
 </b>
 (1),
 <b>
  <a href="/man/man1/pmlc.1.html">
   pmlc
  </a>
 </b>
 (1),
 <b>
  <a href="/man/man1/pmlogger.1.html">
   pmlogger
  </a>
 </b>
 (1)

and
 <b>
  <a href="/man/man1/pmlogger_daily.1.html">
   pmlogger_daily
  </a>
 </b>
 (1).
 <p>
 </p>
 <hr/>
 <a name="index">
 </a>
 <h2>
  Index
 </h2>
 <dl>
  <dt>
   <a href="#lbAB">
    NAME
   </a>
  </dt>
  <dd>
  </dd>
  <dt>
   <a href="#lbAC">
    SYNOPSIS
   </a>
  </dt>
  <dd>
  </dd>
  <dt>
   <a href="#lbAD">
    DESCRIPTION
   </a>
  </dt>
  <dd>
  </dd>
  <dt>
   <a href="#lbAE">
    OPTIONS
   </a>
  </dt>
  <dd>
  </dd>
  <dt>
   <a href="#lbAF">
    FILES
   </a>
  </dt>
  <dd>
  </dd>
  <dt>
   <a href="#lbAG">
    SEE ALSO
   </a>
  </dt>
  <dd>
  </dd>
 </dl>
 
</div>
</div>
</div>
</div>
</div>
<footer class='global-footer is-typeset'>
<div class='row-parent'>
<div class='row'>
<section class='row__colspaced'>
<div class='colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter'>
<div class='col__module'>
<h4>Main Menu</h4>
<ul>
<li>
<a href='/features.html'>Features</a>
</li>
<li>
<a href='/documentation.html'>Documentation</a>
</li>
<li>
<a class='download' href='/download.html'>Download</a>
</li>
</ul>
</div>
</div>
<div class='colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter'>
<div class='col__module'>
<h4>Developers</h4>
<ul>
<li>
<a href='https://github.com/performancecopilot/pcp/issues'>Report an issue</a>
</li>
<li>
<a href='https://github.com/performancecopilot/pcp/projects/1'>Roadmap</a>
</li>
<li>
<a href='/community.html'>Contributing</a>
</li>
<li>
<a href='/team.html'>Team</a>
</li>
</ul>
</div>
</div>
<div class='colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter'>
<div class='col__module'>
<h4>About</h4>
<ul>
<li>
<a href='/testimonials.html'>Testimonials</a>
</li>
<li>
<a href='/faq.html'>FAQ</a>
</li>
<li>
<a href='/website.html'>Website</a>
</li>
</ul>
</div>
</div>
<div class='colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter'>
<div class='col__module'>
<h4>Get Social</h4>
<ul>
<li>
<a class='twitter' href='https://twitter.com/performancepcp' rel='external'>Twitter</a>
</li>
<li>
<a class='github' href='https://github.com/performancecopilot' rel='external'>Github</a>
</li>
</ul>
</div>
</div>
</section>
</div>
<div class='row'>
<div class='colspan2-2'>
<p class='legal'>
This website is Copyright &copy; 2000-2004 Silicon Graphics Inc, 2007-2010 Aconex, 2012-2019 Red Hat
</p>
</div>
</div>
</div>
</footer>

</body>
</html>
