<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <meta content='initial-scale=1' name='viewport'>
    <title>Performance Co-Pilot</title>
    <link href='/assets/css/screen.css' media='all' rel='stylesheet' type='text/css'>
    <link href='/assets/css/master.css' media='all' rel='stylesheet' type='text/css'>
    <link href='/images/pcp.ico' rel='shortcut icon' type='image/ico'>
  </head>
  <body>
    <header class='global-header'>
      <div class='row'>
        <h1 class='global-logo colspan12-6 colspan8-4 colspan6-3 colspan2-1 as-grid'>
          <a href='/index.html'>Performance Co-Pilot</a>
        </h1>
        <nav class='global-header__navigation colspan12-6 colspan8-6 colspan6-4 colspan2-1 as-grid'>
          <ul>
            <li>
              <a href='/features.html'>Features</a>
            </li>
            <li>
              <a href='/documentation.html'>Documentation</a>
            </li>
            <li>
              <a href='/download.html'>Download</a>
            </li>
            <li>
              <a href='/community.html'>Get Involved</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <div class='site-content'>
      <div class='how-to is-typeset'>
        <div class='row-parent'>
          <div class='row'>
            <div class='manpage'>
              ﻿
               <h1>
                GENPMDA
               </h1>
               Section: User Commands  (1)
               <br/>
               <a href="#index">
                Index
               </a>
               <a href="/man">
                Return to Main Contents
               </a>
               <hr/>
               <a name="lbAB">
               </a>
               <h2>
                NAME
               </h2>
               <b>
                genpmda
               </b>
               - Performance Co-Pilot PMDA Generator
               <a name="lbAC">
               </a>
               <h2>
                SYNOPSIS
               </h2>
               <b>
                genpmda
               </b>
               [
               <b>
                -d
               </b>
               ] [
               <b>
                -D
               </b>
               <i>
                domain
               </i>
               ] [
               <b>
                -s
               </b>
               <i>
                stdpmid
               </i>
               ] [
               <b>
                -t
               </b>
               <i>
                topdir
               </i>
               ] [
               <b>
                -n
               </b>
               <i>
                pmns
               </i>
               ] [
               <b>
                -o
               </b>
               <i>
                dir
               </i>
               ] [
               <b>
                -v
               </b>
               ]
               <b>
                -i
               </b>
               <i>
                IAM
               </i>
               <b>
                -c
               </b>
               <i>
                config
               </i>
               <a name="lbAD">
               </a>
               <h2>
                DESCRIPTION
               </h2>
               <b>
                Genpmda
               </b>
               is a rapid application development tool for creating new
              Performance Metrics Domain Agents, see
               <b>
                <a href="/man/man3/pmda.3.html">
                 PMDA
                </a>
               </b>
               (3).
              
              It provides a very easy and efficient way to extend
              the Performance Co-pilot (PCP) with new performance metrics
              without needing to understand the low level details of how PMDAs are
              constructed.
               <p>
                <b>
                 Genpmda
                </b>
                reads a config file containing an augmented
              Performance Metrics Name Space, see
                <b>
                 <a href="/man/man5/pmns.5.html">
                  pmns
                 </a>
                </b>
                (5),
              
              and automatically generates virtually all of the source code
              to implement a fully functional PMDA, including the Makefile,
              name space, support scripts for configuring the new PMDA,
              and the metrics help text.
              Fairly simple PMDAs can be automatically generated from the
              config file without writing any additional code.
              More complicated PMDAs, e.g. containing multiple instance domains,
              require only the refresh methods for the instance domains to be
              written manually.
               </p>
               <p>
                An example of the config file format accepted by
                <b>
                 genpmda
                </b>
                is given below.
                <a name="lbAE">
                </a>
               </p>
               <h2>
                OPTIONS
               </h2>
               <dl compact="">
                <dt>
                 <b>
                  Required options:
                 </b>
                </dt>
                <dd>
                </dd>
                <dt>
                 <b>
                  -c
                 </b>
                 <i>
                  config
                 </i>
                </dt>
                <dd>
                 input
                 <i>
                  config
                 </i>
                 file, see example below
                </dd>
                <dt>
                 <b>
                  -i
                 </b>
                 <i>
                  IAM
                 </i>
                </dt>
                <dd>
                 pmda name
                 <i>
                  IAM
                 </i>
                 , should appear in
                 <i>
                  stdpmid
                 </i>
                 or the
                 <b>
                  -D
                 </b>
                 option must be used to specify a
                 <i>
                  domain
                 </i>
                 .
                </dd>
                <dt>
                 <b>
                  Other options:
                 </b>
                </dt>
                <dd>
                </dd>
                <dt>
                 <b>
                  -d
                 </b>
                </dt>
                <dd>
                 generate an Install script for a daemon PMDA (default is DSO)
                </dd>
                <dt>
                 <b>
                  -t
                 </b>
                 <i>
                  topdir
                 </i>
                </dt>
                <dd>
                 use
                 <i>
                  topdir
                 </i>
                 in generated GNUmakefile, default
                 <b>
                  ../../..
                 </b>
                </dd>
                <dt>
                 <b>
                  -n
                 </b>
                 <i>
                  pmns
                 </i>
                </dt>
                <dd>
                 use
                 <i>
                  pmns
                 </i>
                 as root of the namespace (default matches
                 <b>
                  -i
                 </b>
                 flag)
                </dd>
                <dt>
                 <b>
                  -D
                 </b>
                 <i>
                  domain
                 </i>
                </dt>
                <dd>
                 use
                 <i>
                  domain
                 </i>
                 number in the generated
                 <b>
                  pmns
                 </b>
                 and
                 <b>
                  domain.h
                 </b>
                 (if
                 <b>
                  -s
                 </b>
                 is not given)
                </dd>
                <dt>
                 <b>
                  -s
                 </b>
                 <i>
                  stdpmid
                 </i>
                </dt>
                <dd>
                 path to
                 <i>
                  stdpmid
                 </i>
                 (default
                 <b>
                  ../../pmns/stdpmid
                 </b>
                 )
                </dd>
                <dt>
                 <b>
                  -o
                 </b>
                 <i>
                  dir
                 </i>
                </dt>
                <dd>
                 use
                 <i>
                  dir
                 </i>
                 for generated source code, default
                 <b>
                  ./generated
                 </b>
                </dd>
                <dt>
                 <b>
                  -v
                 </b>
                </dt>
                <dd>
                 print verbose messages about what
                 <b>
                  genpmda
                 </b>
                 is doing.
                </dd>
               </dl>
               <p>
                Example:
                <br/>
                Generate an "example" pmda using domain 99:
                <br/>
                <br/>
                <b>
                 genpmda -D 99 -v -i EXAMPLE -c example.conf
                </b>
               </p>
               <p>
                Here is
                <i>
                 example.conf
                </i>
                config file (for the required
                <b>
                 -c
                </b>
                option):
                <br/>
               </p>
               <p>
               </p>
               <pre>
              example {
                  metric
              }
              
              example.metric {
                  ##  metric            string
                  ##  pmid              EXAMPLE:CLUSTER:0
                  ##  indom             PM_INDOM_NULL
                  ##  type              PM_TYPE_STRING
                  ##  units             PMDA_PMUNITS(0,0,0,0,0,0)
                  ##  semantics         PM_SEM_DISCRETE
                  ##  briefhelptext     one line help text for example.metric.string
                  ##  helptext          long help text for example.metric.string
                  ##  helptext          This is the second line of the long help text
                  ##  helptext          and this is the third line.
                  ##  fetch             function example_string_fetch_callback
                  ##  code              atom-&gt;cp = "hello world";
                  ##  code              return 1;
                  ##  endmetric
              }
              
              </pre>
               <p>
                <a name="lbAF">
                </a>
               </p>
               <h2>
                PCP ENVIRONMENT
               </h2>
               Environment variables with the prefix
               <b>
                PCP_
               </b>
               are used to parameterize the file and directory names
              used by PCP.
              On each installation, the file
               <i>
                /etc/pcp.conf
               </i>
               contains the local values for these variables.
              The
               <b>
                $PCP_CONF
               </b>
               variable may be used to specify an alternative
              configuration file,
              as described in
               <b>
                <a href="/man/man5/pcp.conf.5.html">
                 pcp.conf
                </a>
               </b>
               (5).
               <a name="lbAG">
               </a>
               <h2>
                SEE ALSO
               </h2>
               <p>
                <b>
                 <a href="/man/man3/pmda.3.html">
                  PMDA
                 </a>
                </b>
                (3),
                <b>
                 <a href="/man/man5/pmns.5.html">
                  pmns
                 </a>
                </b>
                (5),
                <b>
                 <a href="/man/man1/pmcd.1.html">
                  pmcd
                 </a>
                </b>
                (1),
                <b>
                 <a href="/man/man5/pcp.conf.5.html">
                  pcp.conf
                 </a>
                </b>
                (5)
              
              and
                <b>
                 <a href="/man/man5/pcp.env.5.html">
                  pcp.env
                 </a>
                </b>
                (5).
                <a name="lbAH">
                </a>
               </p>
               <h2>
                DIAGNOSTICS
               </h2>
               Many, but all are intended to be easily understood.
               <p>
               </p>
               <hr/>
               <a name="index">
               </a>
               <h2>
                Index
               </h2>
               <dl>
                <dt>
                 <a href="#lbAB">
                  NAME
                 </a>
                </dt>
                <dd>
                </dd>
                <dt>
                 <a href="#lbAC">
                  SYNOPSIS
                 </a>
                </dt>
                <dd>
                </dd>
                <dt>
                 <a href="#lbAD">
                  DESCRIPTION
                 </a>
                </dt>
                <dd>
                </dd>
                <dt>
                 <a href="#lbAE">
                  OPTIONS
                 </a>
                </dt>
                <dd>
                </dd>
                <dt>
                 <a href="#lbAF">
                  PCP ENVIRONMENT
                 </a>
                </dt>
                <dd>
                </dd>
                <dt>
                 <a href="#lbAG">
                  SEE ALSO
                 </a>
                </dt>
                <dd>
                </dd>
                <dt>
                 <a href="#lbAH">
                  DIAGNOSTICS
                 </a>
                </dt>
                <dd>
                </dd>
               </dl>
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer class='global-footer is-typeset'>
      <div class='row-parent'>
        <div class='row'>
          <section class='row__colspaced'>
            <div class='colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter'>
              <div class='col__module'>
                <h4>Main Menu</h4>
                <ul>
                  <li>
                    <a href='/features.html'>Features</a>
                  </li>
                  <li>
                    <a href='/documentation.html'>Documentation</a>
                  </li>
                  <li>
                    <a class='download' href='/download.html'>Download</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class='colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter'>
              <div class='col__module'>
                <h4>Developers</h4>
                <ul>
                  <li>
                    <a href='https://github.com/performancecopilot/pcp/issues'>Report an issue</a>
                  </li>
                  <li>
                    <a href='https://www.pcp.io/roadmap'>Roadmap</a>
                  </li>
                  <li>
                    <a href='/community.html'>Contributing</a>
                  </li>
                  <li>
                    <a href='/team.html'>Team</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class='colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter'>
              <div class='col__module'>
                <h4>About</h4>
                <ul>
                  <li>
                    <a href='/news.html'>News</a>
                  </li>
                  <li>
                    <a href='/testimonials.html'>Testimonials</a>
                  </li>
                  <li>
                    <a href='/faq.html'>FAQ</a>
                  </li>
                  <li>
                    <a href='/website.html'>Website</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class='colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter'>
              <div class='col__module'>
                <h4>Get Social</h4>
                <ul>
                  <li>
                    <a class='twitter' href='https://twitter.com/performancepcp' rel='external'>Twitter</a>
                  </li>
                  <li>
                    <a class='github' href='https://github.com/performancecopilot' rel='external'>Github</a>
                  </li>
                </ul>
              </div>
            </div>
          </section>
        </div>
        <div class='row'>
          <div class='colspan2-2'>
            <p class='legal'>
              This website is Copyright &copy; 2000-2004 Silicon Graphics Inc, 2007-2010 Aconex, 2012-2016 Red Hat
            </p>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>
