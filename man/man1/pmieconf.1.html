<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <meta content='initial-scale=1' name='viewport'>
    <title>Performance Co-Pilot</title>
    <link href='/assets/css/screen.css' media='all' rel='stylesheet' type='text/css'>
    <link href='/assets/css/master.css' media='all' rel='stylesheet' type='text/css'>
    <link href='/images/pcp.ico' rel='shortcut icon' type='image/ico'>
  </head>
  <body>
    <header class='global-header'>
      <div class='row'>
        <h1 class='global-logo colspan12-6 colspan8-4 colspan6-3 colspan2-1 as-grid'>
          <a href='/index.html'>Performance Co-Pilot</a>
        </h1>
        <nav class='global-header__navigation colspan12-6 colspan8-6 colspan6-4 colspan2-1 as-grid'>
          <ul>
            <li>
              <a href='/features.html'>Features</a>
            </li>
            <li>
              <a href='/documentation.html'>Documentation</a>
            </li>
            <li>
              <a href='/download.html'>Download</a>
            </li>
            <li>
              <a href='/community.html'>Get Involved</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <div class='site-content'>
      <div class='how-to is-typeset'>
        <div class='row-parent'>
          <div class='row'>
            <div class='manpage'>
              ï»¿
               <h1>
                PMIECONF
               </h1>
               Section: User Commands  (1)
               <br/>
               <a href="#index">
                Index
               </a>
               <a href="/man">
                Return to Main Contents
               </a>
               <hr/>
               <a name="lbAB">
               </a>
               <h2>
                NAME
               </h2>
               <b>
                pmieconf
               </b>
               - display and set configurable pmie rule variables
               <a name="lbAC">
               </a>
               <h2>
                SYNOPSIS
               </h2>
               <b>
                pmieconf
               </b>
               [
               <b>
                -cFv
               </b>
               ]
              [
               <b>
                -f
               </b>
               <i>
                file
               </i>
               ]
              [
               <b>
                -r
               </b>
               <i>
                rulepath
               </i>
               ]
              [
               <i>
                command
               </i>
               [
               <i>
                args...
               </i>
               ]]
               <a name="lbAD">
               </a>
               <h2>
                DESCRIPTION
               </h2>
               <b>
                pmieconf
               </b>
               is a utility for viewing and configuring variables from generalized
               <b>
                <a href="/man/man1/pmie.1.html">
                 pmie
                </a>
               </b>
               (1)
              
              rules.
              The set of generalized rules is read in from
               <i>
                rulepath
               </i>
               ,
              
              and the output
               <i>
                file
               </i>
               produced by
               <b>
                pmieconf
               </b>
               is a valid input file for
               <b>
                pmie
               </b>
               .
               <p>
                A brief description of the
                <b>
                 pmieconf
                </b>
                command line options follows:
               </p>
               <dl compact="">
                <dt>
                 <b>
                  -c
                 </b>
                </dt>
                <dd>
                 When run from automated
                 <b>
                  pmie
                 </b>
                 setup processes, this option is used to add a specific message and
              timestamp indicating that this is the case.
              It is not appropriate when using the tool interactively.
                </dd>
                <dt>
                 <b>
                  -f
                 </b>
                 <i>
                  file
                 </i>
                </dt>
                <dd>
                 Any rule modifications resulting from
                 <b>
                  pmieconf
                 </b>
                 manipulation of variable values will be written to
                 <i>
                  file
                 </i>
                 .
              The default value of
                 <i>
                  file
                 </i>
                 is dependent on the user ID - for the root
              user, the file
                 <i>
                  $PCP_VAR_DIR/config/pmieconf/config.pmie
                 </i>
                 is used, for other users the default is
                 <i>
                  $HOME/.pcp/pmie/config.pmie
                 </i>
                 .
                </dd>
                <dt>
                 <b>
                  -F
                 </b>
                </dt>
                <dd>
                 Forces the
                 <b>
                  pmieconf
                 </b>
                 output
                 <i>
                  file
                 </i>
                 to be created (or updated), after which
                 <b>
                  pmieconf
                 </b>
                 immediately exits.
                </dd>
                <dt>
                 <b>
                  -r
                 </b>
                 <i>
                  rulepath
                 </i>
                </dt>
                <dd>
                 Allows the source of generalized
                 <b>
                  pmie
                 </b>
                 rules to be changed -
                 <i>
                  rulepath
                 </i>
                 is a colon-delimited list of
                 <b>
                  <a href="/man/man5/pmieconf.5.html">
                   pmieconf
                  </a>
                 </b>
                 (5)
              
              rule files and/or subdirectories.
              The default value for
                 <i>
                  rulepath
                 </i>
                 is
                 <i>
                  $PCP_VAR_DIR/config/pmieconf
                 </i>
                 .
              
              Use of this option overrides the
                 <b>
                  PMIECONF_PATH
                 </b>
                 environment variable which has a similar function.
                </dd>
                <dt>
                 <b>
                  -v
                 </b>
                </dt>
                <dd>
                 Verbose mode.  Additional information associated with each rule and its
              associated variables will be displayed.  This is the complete list of
              variables which affects any given rule (by default, global variables are
              not displayed with the rule).
                </dd>
               </dl>
               <p>
                The
                <b>
                 pmieconf
                </b>
                <i>
                 command
                </i>
                s
              
              allow information related to the various rules and configurable variables
              to be displayed or modified.
              If no
                <b>
                 pmieconf
                </b>
                <i>
                 command
                </i>
                s
              
              are presented on the command line,
                <b>
                 pmieconf
                </b>
                prompts for
                <i>
                 command
                </i>
                s
              
              interactively.
               </p>
               <p>
                The
                <b>
                 pmieconf
                </b>
                <i>
                 command
                </i>
                language is described here:
               </p>
               <dl compact="">
                <dt>
                 <b>
                  help  [ { . | all | global | &lt;rule&gt; | &lt;group&gt; } [&lt;variable&gt;] ]
                 </b>
                </dt>
                <dd>
                 Without arguments, the
                 <b>
                  help
                 </b>
                 command displays the syntax for all of the available
                 <b>
                  pmieconf
                 </b>
                 commands.  With one argument, a description of one or more of the generalized
              rules is displayed.  With two arguments, a description of a specific variable
              relating to one or more of the generalized rules is displayed.
                </dd>
                <dt>
                 <b>
                  rules  [ enabled | disabled ]
                 </b>
                </dt>
                <dd>
                 Display the name and short summary for all of the generalized rules found on
                 <i>
                  rulepath
                 </i>
                 .
              
              Each of the rule names can be used in place of the keyword
                 <b>
                  &lt;rule&gt;
                 </b>
                 in this command syntax description.
              The
                 <b>
                  enabled
                 </b>
                 and
                 <b>
                  disabled
                 </b>
                 options can be used to filter the set of rules displayed to just those which
              are enabled or disabled respectfully.
                </dd>
                <dt>
                 <b>
                  groups
                 </b>
                </dt>
                <dd>
                 Display the name of all of the rule groups that were found on
                 <i>
                  rulepath
                 </i>
                 .
              
              Each of the group names can be used in place of the keyword
                 <b>
                  &lt;group&gt;
                 </b>
                 in this command syntax description, which applies the command to all rules
              within the rule group.
                </dd>
                <dt>
                 <b>
                  status
                 </b>
                </dt>
                <dd>
                 Display status information relating to the current
                 <b>
                  pmieconf
                 </b>
                 session, including a list of running
                 <b>
                  pmie
                 </b>
                 processes which are currently using
                 <i>
                  file
                 </i>
                 .
                </dd>
                <dt>
                 <b>
                  enable  { . | all | &lt;rule&gt; | &lt;group&gt; }
                 </b>
                </dt>
                <dd>
                 Enables the specified rule or group of rules.  An enabled rule is one which
              will be included in the
                 <b>
                  pmie
                 </b>
                 configuration file generated by
                 <b>
                  pmieconf
                 </b>
                 .
              
              Any enabled "actions" will be appended to the rule's "predicate", in a
              manner conforming to the
                 <b>
                  pmie
                 </b>
                 syntax ("actions" can be viewed using the
                 <b>
                  list global
                 </b>
                 command, described below).
                </dd>
                <dt>
                 <b>
                  disable  { . | all | &lt;rule&gt; | &lt;group&gt; }
                 </b>
                </dt>
                <dd>
                 Disables the specified rule or group of rules.  If the rule was previously
              enabled, it will be removed from the
                 <b>
                  pmie
                 </b>
                 configuration file generated by
                 <b>
                  pmieconf
                 </b>
                 ,
              
              and hence no longer evaluated when
                 <b>
                  pmie
                 </b>
                 is restarted (using
                 <b>
                  pmieconf
                 </b>
                 does not affect any existing
                 <b>
                  pmie
                 </b>
                 processes using
                 <i>
                  file
                 </i>
                 ).
                </dd>
                <dt>
                 <b>
                  list  { . | all | global | &lt;rule&gt; | &lt;group&gt; } [&lt;variable&gt;]
                 </b>
                </dt>
                <dd>
                 Display the values for a specific rule variable; or for all variables of
              a rule, a rule group, all rules, or the global variables.
                </dd>
                <dt>
                 <b>
                  modify  { . | all | global | &lt;rule&gt; | &lt;group&gt; } &lt;variable&gt; &lt;value&gt;
                 </b>
                </dt>
                <dd>
                 Enable, disable, or otherwise change the value for one or more rule variables.
              This value must be consistent with the type of the variable, which can be
              inferred from the format of the printed value - e.g. strings will be enclosed
              in double-quotes, percentages have the ``%'' symbol appended, etc.
              Note that certain rule variables cannot be modified through
                 <b>
                  pmieconf
                 </b>
                 - "predicate" and "help", for example.
                </dd>
                <dt>
                 <b>
                  undo  { . | all | global | &lt;rule&gt; | &lt;group&gt; } [&lt;variable&gt;]
                 </b>
                </dt>
                <dd>
                 Applicable only to a variable whose value has been modified - this
                 <i>
                  command
                 </i>
                 simply reverts to the default value for the given variable.
                </dd>
                <dt>
                 <b>
                  quit
                 </b>
                </dt>
                <dd>
                 Save any changes made to
                 <i>
                  file
                 </i>
                 and then exit
                 <b>
                  pmieconf
                 </b>
                 .
                </dd>
                <dt>
                 <b>
                  abort
                 </b>
                </dt>
                <dd>
                 Exit
                 <b>
                  pmieconf
                 </b>
                 immediately without saving any changes to
                 <i>
                  file
                 </i>
                 .
                </dd>
               </dl>
               <p>
                Each of the commands above can be shortened by simply using the first
              character of the command name, and also ``?'' for help.
               </p>
               <p>
                Use of the
                <b>
                 all
                </b>
                keyword
              causes the command to be applied to all of the rules.
              The
                <b>
                 global
                </b>
                keyword refers to those variables which are applied to every rule.
              Such variables can be changed either globally or locally, for example:
               </p>
               <p>
               </p>
               <pre>
                pmieconf&gt; modify global delta "5 minutes"
                pmieconf&gt; modify memory delta "1 minute"
              </pre>
               <p>
                causes all rules to now be evaluated once every five minutes, except
              for rules in the "memory" group which are to be evaluated once per minute.
               </p>
               <p>
                The ``.'' character is special to
                <b>
                 pmieconf
                </b>
                - it refers to the last successfully used value of
                <b>
                 all
                </b>
                ,
                <b>
                 global
                </b>
                ,
                <b>
                 &lt;rule&gt;
                </b>
                or
                <b>
                 &lt;group&gt;
                </b>
                .
                <a name="lbAE">
                </a>
               </p>
               <h2>
                EXAMPLES
               </h2>
               Specify that all of the rules in the "memory" group should be evaluated:
               <p>
               </p>
               <pre>
                pmieconf&gt; modify memory enabled yes
              </pre>
               <p>
                Change your mind, and revert to using only the "memory" rules which were
              enabled by default:
               </p>
               <p>
               </p>
               <pre>
                pmieconf&gt; undo memory enabled
              </pre>
               <p>
                Specify that notification of rules which evaluate to true should be sent to
                <b>
                 <a href="http://man7.org/linux/man-pages/man1/syslogd.1.html">
                  syslogd
                 </a>
                </b>
                (1):
               </p>
               <p>
               </p>
               <pre>
                pmieconf&gt; modify global syslog_action yes
              </pre>
               <p>
                Specify that rules in the "per_cpu" group should use a different holdoff value
              to other rules:
               </p>
               <p>
               </p>
               <pre>
                pmieconf&gt; help global holdoff
                  rule: global  [generic parameters applied to all rules]
                   var: holdoff
                  help: Once the predicate is true and the action is executed,
                        this variable allows suppression of further action
                        execution until the specified interval has elapsed.
                        A value of zero enables execution of the action if
                        the rule predicate is true at the next sample. Default
                        units are seconds and common units are "second", "sec",
                        "minute", "min" and "hour".
              
                pmieconf&gt; modify per_cpu holdoff "1 hour"
              </pre>
               <p>
                Lower the threshold associated with a particular variable for a specified
              rule:
               </p>
               <p>
               </p>
               <pre>
                pmieconf&gt; l cpu.syscall predicate
                  rule: cpu.syscall  [High aggregate system call rate]
                    predicate = 
                            some_host (
                                ( kernel.all.syscall $hosts$ )
                                  &gt; $threshold$ count/sec * hinv.ncpu $hosts$
                            )
              
                pmieconf&gt; m . threshold 7000
              
                pmieconf&gt; l . threshold
                  rule: cpu.syscall  [High aggregate system call rate]
                          threshold = 7000
              </pre>
               <p>
                <a name="lbAF">
                </a>
               </p>
               <h2>
                ENVIRONMENT
               </h2>
               The environment variable
               <b>
                PMIECONF_PATH
               </b>
               has a similar function to the
               <b>
                -r
               </b>
               option described above, and if set will be used provided no
               <b>
                -r
               </b>
               option is presented.
               <a name="lbAG">
               </a>
               <h2>
                FILES
               </h2>
               <dl compact="">
                <dt>
                 <i>
                  $PCP_VAR_DIR/config/pmieconf/
                 </i>
                 */*
                </dt>
                <dd>
                 generalized system resource monitoring rules
                </dd>
                <dt>
                 <i>
                  $PCP_VAR_DIR/config/pmieconf/config.pmie
                 </i>
                </dt>
                <dd>
                 default super-user settings for system resource monitoring rules
                </dd>
                <dt>
                 <i>
                  $HOME/.pcp/pmie/config.pmie
                 </i>
                </dt>
                <dd>
                 default user settings for system resource monitoring rules
                </dd>
               </dl>
               <a name="lbAH">
               </a>
               <h2>
                PCP ENVIRONMENT
               </h2>
               Environment variables with the prefix
               <b>
                PCP_
               </b>
               are used to parameterize the file and directory names
              used by PCP.
              On each installation, the file
               <i>
                /etc/pcp.conf
               </i>
               contains the local values for these variables.
              The
               <b>
                $PCP_CONF
               </b>
               variable may be used to specify an alternative
              configuration file,
              as described in
               <b>
                <a href="/man/man5/pcp.conf.5.html">
                 pcp.conf
                </a>
               </b>
               (5).
               <a name="lbAI">
               </a>
               <h2>
                SEE ALSO
               </h2>
               <b>
                <a href="/man/man1/pcpintro.1.html">
                 PCPIntro
                </a>
               </b>
               (1),
               <b>
                <a href="/man/man1/pmie.1.html">
                 pmie
                </a>
               </b>
               (1),
               <b>
                <a href="/man/man1/pmie_check.1.html">
                 pmie_check
                </a>
               </b>
               (1)
              
              and
               <b>
                <a href="/man/man5/pmieconf.5.html">
                 pmieconf
                </a>
               </b>
               (5).
               <p>
               </p>
               <hr/>
               <a name="index">
               </a>
               <h2>
                Index
               </h2>
               <dl>
                <dt>
                 <a href="#lbAB">
                  NAME
                 </a>
                </dt>
                <dd>
                </dd>
                <dt>
                 <a href="#lbAC">
                  SYNOPSIS
                 </a>
                </dt>
                <dd>
                </dd>
                <dt>
                 <a href="#lbAD">
                  DESCRIPTION
                 </a>
                </dt>
                <dd>
                </dd>
                <dt>
                 <a href="#lbAE">
                  EXAMPLES
                 </a>
                </dt>
                <dd>
                </dd>
                <dt>
                 <a href="#lbAF">
                  ENVIRONMENT
                 </a>
                </dt>
                <dd>
                </dd>
                <dt>
                 <a href="#lbAG">
                  FILES
                 </a>
                </dt>
                <dd>
                </dd>
                <dt>
                 <a href="#lbAH">
                  PCP ENVIRONMENT
                 </a>
                </dt>
                <dd>
                </dd>
                <dt>
                 <a href="#lbAI">
                  SEE ALSO
                 </a>
                </dt>
                <dd>
                </dd>
               </dl>
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer class='global-footer is-typeset'>
      <div class='row-parent'>
        <div class='row'>
          <section class='row__colspaced'>
            <div class='colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter'>
              <div class='col__module'>
                <h4>Main Menu</h4>
                <ul>
                  <li>
                    <a href='/features.html'>Features</a>
                  </li>
                  <li>
                    <a href='/documentation.html'>Documentation</a>
                  </li>
                  <li>
                    <a class='download' href='/download.html'>Download</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class='colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter'>
              <div class='col__module'>
                <h4>Developers</h4>
                <ul>
                  <li>
                    <a href='https://github.com/performancecopilot/pcp/issues'>Report an issue</a>
                  </li>
                  <li>
                    <a href='https://www.pcp.io/roadmap'>Roadmap</a>
                  </li>
                  <li>
                    <a href='/community.html'>Contributing</a>
                  </li>
                  <li>
                    <a href='/team.html'>Team</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class='colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter'>
              <div class='col__module'>
                <h4>About</h4>
                <ul>
                  <li>
                    <a href='/testimonials.html'>Testimonials</a>
                  </li>
                  <li>
                    <a href='/faq.html'>FAQ</a>
                  </li>
                  <li>
                    <a href='/website.html'>Website</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class='colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter'>
              <div class='col__module'>
                <h4>Get Social</h4>
                <ul>
                  <li>
                    <a class='twitter' href='https://twitter.com/performancepcp' rel='external'>Twitter</a>
                  </li>
                  <li>
                    <a class='github' href='https://github.com/performancecopilot' rel='external'>Github</a>
                  </li>
                </ul>
              </div>
            </div>
          </section>
        </div>
        <div class='row'>
          <div class='colspan2-2'>
            <p class='legal'>
              This website is Copyright &copy; 2000-2004 Silicon Graphics Inc, 2007-2010 Aconex, 2012-2016 Red Hat
            </p>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>
