<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns:d="http://docbook.org/ns/docbook">3.4. PCP Environment Variables</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.2" /><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content="PCP-pcp-users-and-administrators-guide-3-en-US-2.0-2" /><link rel="home" href="index.html" title="Performance Co-Pilot™ User's and Administrator's Guide" /><link rel="up" href="LE94335-PARENT.html" title="Chapter 3. Common Conventions and Arguments" /><link rel="prev" href="id5195323.html" title="3.3.3. Timezone Options" /><link rel="next" href="LE12082-PARENT.html" title="3.5. Running PCP Tools through a Firewall" /></head><body><p id="title"><a class="left" href="https://fedorahosted.org/publican"><img alt="Product Site" src="Common_Content/images//image_left.png" /></a><a class="right" href="https://fedorahosted.org/publican"><img alt="Documentation Site" src="Common_Content/images//image_right.png" /></a></p><ul class="docnav top"><li class="previous"><a accesskey="p" href="id5195323.html"><strong>Prev</strong></a></li><li class="home">pcp-users-and-administrators-guide</li><li class="next"><a accesskey="n" href="LE12082-PARENT.html"><strong>Next</strong></a></li></ul><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="LE61303-PARENT">
      ⁠</a>3.4. PCP Environment Variables</h2></div></div></div><div class="para">
				<a id="ITch03-14" class="indexterm"></a><a id="IG31371888136" class="indexterm"></a><a id="IG31371888137" class="indexterm"></a><a id="IG31371888138" class="indexterm"></a><a id="IG31371888139" class="indexterm"></a>When you are using PCP tools and utilities and are calling PCP library functions, a standard set of defined environment variables are available in the <code class="filename">${PCP_DIR}/etc/pcp.conf</code> file. These variables are generally used to specify the location of various PCP pieces in the file system and may be loaded into shell scripts by sourcing the <code class="filename">${PCP_DIR}/etc/pcp.env</code> shell script. They may also be queried by C, C++, perl and python programs using the <code class="command">pmGetConfig</code> library function. If a variable is already defined in the environment, the values in the <code class="filename">pcp.conf</code> file do not override those values; that is, the values in <code class="filename">pcp.conf</code> serve only as installation defaults. For additional information, see the <code class="command">pcp.conf(5)</code>, <code class="command">pcp.env(5)</code>, and <code class="command">pmGetConfig(3)</code> man pages.
			</div><div class="para">
				The following environment variables are recognized by PCP (these definitions are also available on the <code class="command">PCPIntro(1)</code> man page):
			</div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">PCP_COUNTER_WRAP</code></span></dt><dd><div class="para">
							<a id="ITch03-15" class="indexterm"></a>Many of the performance metrics exported from PCP agents expect that counters increase monotonically. Under some circumstances, one value of a metric may be smaller than the previously fetched value. This can happen when a counter of finite precision overflows, when the PCP agent has been reset or restarted, or when the PCP agent exports values from an underlying instrumentation that is subject to asynchronous discontinuity.
						</div><div class="para">
							If set, the <code class="literal">PCP_COUNTER_WRAP</code> environment variable indicates that all such cases of a decreasing counter should be treated as a counter overflow; and hence the values are assumed to have wrapped once in the interval between consecutive samples. Counter wrapping was the default in versions before the PCP release 1.3.
						</div></dd><dt><span class="term"><code class="literal">PCP_STDERR</code></span></dt><dd><div class="para">
							<a id="ITch03-18" class="indexterm"></a><a id="IG31371888140" class="indexterm"></a><a id="IG31371888141" class="indexterm"></a>Specifies whether <code class="command">pmprintf()</code> error messages are sent to standard error, an <code class="literal">pmconfirm</code> dialog box, or to a named file; see the <code class="command">pmprintf(3)</code> man page. Messages go to standard error if <code class="literal">PCP_STDERR</code> is unset or set without a value. If this variable is set to <code class="literal">DISPLAY</code>, then messages go to an <code class="literal">pmconfirm</code> dialog box; see the <code class="command">pmconfirm(1)</code> man page. Otherwise, the value of <code class="literal">PCP_STDERR</code> is assumed to be the name of an output file.
						</div></dd><dt><span class="term"><code class="literal">PMCD_CONNECT_TIMEOUT</code></span></dt><dd><div class="para">
							<a id="ITch03-22" class="indexterm"></a><a id="IG31371888143" class="indexterm"></a>When attempting to connect to a remote PMCD on a system that is booting or at the other end of a slow network link, some PMAPI routines could potentially block for a long time until the remote system responds. These routines abort and return an error if the connection has not been established after some specified interval has elapsed. The default interval is 5 seconds. This may be modified by setting this variable in the environment to a larger number of seconds for the desired time out. This is most useful in cases where the remote host is at the end of a slow network, requiring longer latencies to establish the connection correctly.
						</div></dd><dt><span class="term"><code class="literal">PMCD_PORT</code></span></dt><dd><div class="para">
							<a id="ITch03-23" class="indexterm"></a><a id="IG31371888144" class="indexterm"></a><a id="IG31371888145" class="indexterm"></a>This TCP/IP port is used by PMCD to create the socket for incoming connections and requests. The default is port number 44321, which you may override by setting this variable to a different port number. If a non-default port is in effect when PMCD is started, then every monitoring application connecting to that PMCD must also have this variable set in its environment before attempting a connection.
						</div></dd><dt><span class="term"><code class="literal">PMCD_LOCAL</code></span></dt><dd><div class="para">
							<a id="ITch03-21" class="indexterm"></a><a id="IG31371889144" class="indexterm"></a>This setting indicates that PMCD must only bind to the loopback interface for incoming connections and requests. In this mode, connections from remote hosts are not possible.
						</div></dd><dt><span class="term"><code class="literal">PMCD_RECONNECT_TIMEOUT</code></span></dt><dd><div class="para">
							<a id="ITch03-24" class="indexterm"></a><a id="IG31371888146" class="indexterm"></a>When a monitor or client application loses its connection to a PMCD, the connection may be reestablished by calling the <code class="command">pmReconnectContext(3)</code> PMAPI function. However, attempts to reconnect are controlled by a back-off strategy to avoid flooding the network with reconnection requests. By default, the back-off delays are 5, 10, 20, 40, and 80 seconds for consecutive reconnection requests from a client (the last delay is repeated for any further attempts after the last delay in the list). Setting this environment variable to a comma-separated list of positive integers redefines the back-off delays. For example, setting the delays to <strong class="userinput"><code>1,2</code></strong> will back off for 1 second, then back off every 2 seconds thereafter.
						</div></dd><dt><span class="term"><code class="literal">PMCD_REQUEST_TIMEOUT</code></span></dt><dd><div class="para">
							<a id="ITch03-25" class="indexterm"></a><a id="IG31371888147" class="indexterm"></a>For monitor or client applications connected to PMCD, there is a possibility of the application hanging on a request for performance metrics or metadata or help text. These delays may become severe if the system running PMCD crashes or the network connection is lost or the network link is very slow. By setting this environment variable to a real number of seconds, requests to PMCD timeout after the specified number of seconds. The default behavior is to wait 10 seconds for a response from every PMCD for all applications.
						</div></dd><dt><span class="term"><code class="literal">PMLOGGER_PORT</code></span></dt><dd><div class="para">
							<a id="IG31371888148" class="indexterm"></a><a id="IG31371888149" class="indexterm"></a><a id="IG31371888150" class="indexterm"></a>This environment variable may be used to change the base TCP/IP port number used by <code class="command">pmlogger</code> to create the socket to which <code class="command">pmlc</code> instances try to connect. The default base port number is 4330. If used, this variable should be set in the environment before <code class="command">pmlogger</code> is executed. If <code class="command">pmlc</code> and <code class="command">pmlogger</code> are on different hosts, then obviously <code class="literal">PMLOGGER_PORT</code> must be set to the same value in both places.
						</div></dd><dt><span class="term"><code class="literal">PMLOGGER_LOCAL</code></span></dt><dd><div class="para">
							<a id="IG31371889148" class="indexterm"></a><a id="IG31371888142" class="indexterm"></a>This environment variable indicates that <code class="command">pmlogger</code> must only bind to the loopback interface for <code class="command">pmlc</code> connections and requests. In this mode, <code class="command">pmlc</code> connections from remote hosts are not possible. If used, this variable should be set in the environment before <code class="command">pmlogger</code> is executed.
						</div></dd><dt><span class="term"><code class="literal">PMPROXY_PORT</code></span></dt><dd><div class="para">
							<a id="ITch03-30" class="indexterm"></a><a id="IG31371888152" class="indexterm"></a> This environment variable may be used to change the base TCP/IP port number used by <code class="command">pmproxy</code> to create the socket to which proxied clients connect, on their way to a distant <code class="command">pmcd</code>.
						</div></dd><dt><span class="term"><code class="literal">PMPROXY_LOCAL</code></span></dt><dd><div class="para">
							<a id="ITch03-31" class="indexterm"></a><a id="IG31371888151" class="indexterm"></a> This setting indicates that <code class="command">pmproxy</code> must only bind to the loopback interface for incoming connections and requests. In this mode, connections from remote hosts are not possible.
						</div></dd></dl></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="id5195323.html"><strong>Prev</strong>3.3.3. Timezone Options</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="LE12082-PARENT.html"><strong>Next</strong>3.5. Running PCP Tools through a Firewall</a></li></ul></body></html>