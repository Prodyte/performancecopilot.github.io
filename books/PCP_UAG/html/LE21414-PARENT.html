<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/TR/xhtml1/transitional" xmlns:fo="http://www.w3.org/1999/XSL/Format"><head xmlns="http://www.w3.org/1999/xhtml"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns:d="http://docbook.org/ns/docbook">Chapter 5. Performance Metrics Inference Engine</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.2" /><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content="PCP-pcp-users-and-administrators-guide-3-en-US-2.0-2" /><link rel="home" href="index.html" title="Performance Co-Pilot™ User's and Administrator's Guide" /><link rel="up" href="index.html" title="Performance Co-Pilot™ User's and Administrator's Guide" /><link rel="prev" href="LE10170-PARENT.html" title="4.5. The pmstore Command" /><link rel="next" href="LE15993-PARENT.html" title="5.2. Basic pmie Usage" />
<meta xmlns="" charset="utf-8" />
<meta xmlns="" content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" />
<meta xmlns="" content="initial-scale=1" name="viewport" />
<title xmlns="">Performance Co-Pilot</title>
<link xmlns="" href="/assets/css/screen.css" media="all" rel="stylesheet" type="text/css" />
<link xmlns="" href="/assets/css/master.css" media="all" rel="stylesheet" type="text/css" />
<link xmlns="" href="/images/pcp.ico" rel="shortcut icon" type="image/ico" />
</head><body>
    <header xmlns="" class="global-header">
      <div class="row">
        <h1 class="global-logo colspan12-6 colspan8-4 colspan6-3 colspan2-1 as-grid">
          <a href="/index.html">Performance Co-Pilot</a>
        </h1>
        <nav class="global-header__navigation colspan12-6 colspan8-6 colspan6-4 colspan2-1 as-grid">
          <ul>
            <li>
              <a href="/features.html">Features</a>
            </li>
            <li>
              <a href="/documentation.html">Documentation</a>
            </li>
            <li>
              <a href="/download.html">Download</a>
            </li>
            <li>
              <a href="/community.html">Get Involved</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
<div class="site-content"><div class="how-to is-typeset"><div class="row-parent"><div class="row"><p xmlns="http://www.w3.org/1999/xhtml" id="title"><a class="left" href="https://pcp.io"><img alt="Product Site" src="Common_Content/images//image_left.png" /></a><a class="right" href="https://pcp.io/documentation.html"><img alt="Documentation Site" src="Common_Content/images//image_right.png" /></a></p><ul xmlns="http://www.w3.org/1999/xhtml" class="docnav top"><li class="previous"><a accesskey="p" href="LE10170-PARENT.html"><strong>Prev</strong></a></li><li class="home">pcp-users-and-administrators-guide</li><li class="next"><a accesskey="n" href="LE15993-PARENT.html"><strong>Next</strong></a></li></ul><div xmlns="http://www.w3.org/1999/xhtml" class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="LE21414-PARENT">
      ⁠</a>Chapter 5. Performance Metrics Inference Engine</h1></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="section"><a href="LE21414-PARENT.html#LE41170-PARENT">5.1. Introduction to <code class="command">pmie</code></a></span></dt><dt><span class="section"><a href="LE15993-PARENT.html">5.2. Basic <code class="command">pmie</code> Usage</a></span></dt><dd><dl><dt><span class="section"><a href="LE15993-PARENT.html#LE23271-PARENT">5.2.1. <code class="command">pmie</code> use of PCP services</a></span></dt><dt><span class="section"><a href="id5199666.html">5.2.2. Simple <code class="command">pmie</code> Usage</a></span></dt><dt><span class="section"><a href="id5199841.html">5.2.3. Complex <code class="command">pmie</code> Examples</a></span></dt></dl></dd><dt><span class="section"><a href="LE90227-PARENT.html">5.3. Specification Language for <code class="command">pmie</code></a></span></dt><dd><dl><dt><span class="section"><a href="LE90227-PARENT.html#LE51927-PARENT">5.3.1. Basic <code class="command">pmie</code> Syntax</a></span></dt><dt><span class="section"><a href="LE88708-PARENT.html">5.3.2. Setting Evaluation Frequency</a></span></dt><dt><span class="section"><a href="LE73508-PARENT.html">5.3.3. <code class="command">pmie</code> Metric Expressions</a></span></dt><dt><span class="section"><a href="LE59099-PARENT.html">5.3.4. <code class="command">pmie</code> Rate Conversion</a></span></dt><dt><span class="section"><a href="id5201567.html">5.3.5. <code class="command">pmie</code> Arithmetic Expressions</a></span></dt><dt><span class="section"><a href="id5201630.html">5.3.6. <code class="command">pmie</code> Logical Expressions</a></span></dt><dt><span class="section"><a href="id5202519.html">5.3.7. <code class="command">pmie</code> Rule Expressions</a></span></dt><dt><span class="section"><a href="LE87294-PARENT.html">5.3.8. <code class="command">pmie</code> Intrinsic Operators</a></span></dt></dl></dd><dt><span class="section"><a href="LE60280-PARENT.html">5.4. <code class="command">pmie</code> Examples</a></span></dt><dt><span class="section"><a href="LE31514-PARENT.html">5.5. Developing and Debugging <code class="command">pmie</code> Rules</a></span></dt><dt><span class="section"><a href="LE91221-PARENT.html">5.6. Caveats and Notes on <code class="command">pmie</code></a></span></dt><dd><dl><dt><span class="section"><a href="LE91221-PARENT.html#id5204255">5.6.1. Performance Metrics Wraparound</a></span></dt><dt><span class="section"><a href="id5204304.html">5.6.2. <code class="command">pmie</code> Sample Intervals</a></span></dt><dt><span class="section"><a href="id5204396.html">5.6.3. <code class="command">pmie</code> Instance Names</a></span></dt><dt><span class="section"><a href="id5204468.html">5.6.4. <code class="command">pmie</code> Error Detection</a></span></dt></dl></dd><dt><span class="section"><a href="Z927039566sdc.html">5.7. Creating <code class="command">pmie</code> Rules with <code class="command">pmieconf</code></a></span></dt><dt><span class="section"><a href="Z927039824sdc.html">5.8. Management of <code class="command">pmie</code> Processes</a></span></dt><dd><dl><dt><span class="section"><a href="Z927039824sdc.html#id5208584">5.8.1. Add a <code class="command">pmie</code> <code class="command">crontab</code> Entry</a></span></dt><dt><span class="section"><a href="id5205585.html">5.8.2. Global Files and Directories</a></span></dt><dt><span class="section"><a href="id5205812.html">5.8.3. <code class="command">pmie</code> Instances and Their Progress</a></span></dt></dl></dd></dl></div><div class="para">
			<a id="ITch06-0" class="indexterm"></a><a id="ITch06-1" class="indexterm"></a><a id="ITch06-2" class="indexterm"></a>The Performance Metrics Inference Engine (<code class="command">pmie</code>) is a tool that provides automated monitoring of, and reasoning about, system performance within the Performance Co-Pilot (PCP) framework.
		</div><div class="para">
			The major sections in this chapter are as follows:
		</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
					<a class="xref" href="LE21414-PARENT.html#LE41170-PARENT">Section 5.1, “Introduction to <code class="command">pmie</code>”</a>, provides an introduction to the concepts and design of <code class="command">pmie</code>.
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="LE15993-PARENT.html">Section 5.2, “Basic <code class="command">pmie</code> Usage”</a>, describes the basic syntax and usage of <code class="command">pmie</code>.
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="LE90227-PARENT.html">Section 5.3, “Specification Language for <code class="command">pmie</code>”</a>, discusses the complete <code class="command">pmie</code> rule specification language.
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="LE60280-PARENT.html">Section 5.4, “<code class="command">pmie</code> Examples”</a>, provides an example, covering several common performance scenarios.
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="LE31514-PARENT.html">Section 5.5, “Developing and Debugging <code class="command">pmie</code> Rules”</a>, presents some tips and techniques for <code class="command">pmie</code> rule development.
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="LE91221-PARENT.html">Section 5.6, “Caveats and Notes on <code class="command">pmie</code>”</a>, presents some important information on using <code class="command">pmie</code>.
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="Z927039566sdc.html">Section 5.7, “Creating <code class="command">pmie</code> Rules with <code class="command">pmieconf</code>”</a>, describes how to use the <code class="command">pmieconf</code> command to generate <code class="command">pmie</code> rules.
				</div></li><li class="listitem"><div class="para">
					<a class="xref" href="Z927039824sdc.html">Section 5.8, “Management of <code class="command">pmie</code> Processes”</a>, provides support for running <code class="command">pmie</code> as a daemon.
				</div></li></ul></div><div class="section"><div class="titlepage"><div><div keep-together.within-column="always"><h2 class="title"><a id="LE41170-PARENT">
      ⁠</a>5.1. Introduction to <code class="command">pmie</code></h2></div></div></div><div class="para">
				<a id="ITch06-4" class="indexterm"></a>Automated reasoning within Performance Co-Pilot (PCP) is provided by the Performance Metrics Inference Engine, (<code class="command">pmie</code>), which is an applied artificial intelligence application.
			</div><div class="para">
				The <code class="command">pmie</code> tool accepts expressions describing adverse performance scenarios, and periodically evaluates these against streams of performance metric values from one or more sources. When an expression is found to be true, <code class="command">pmie</code> is able to execute arbitrary actions to alert or notify the system administrator of the occurrence of an adverse performance scenario. These facilities are very general, and are designed to accommodate the automated execution of a mixture of generic and site-specific performance monitoring and control functions.
			</div><div class="para">
				The stream of performance metrics to be evaluated may be from one or more hosts, or from one or more PCP archive logs. In the latter case, <code class="command">pmie</code> may be used to retrospectively identify adverse performance conditions.
			</div><div class="para">
				<a id="IG31371888177" class="indexterm"></a><a id="IG31371888178" class="indexterm"></a>Using <code class="command">pmie</code>, you can filter, interpret, and reason about the large volume of performance data made available from PCP collector systems or PCP archives.
			</div><div class="para">
				Typical <code class="command">pmie</code> uses include the following:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						Automated real-time monitoring of a host, a set of hosts, or client-server pairs of hosts to raise operational alarms when poor performance is detected in a production environment
					</div></li><li class="listitem"><div class="para">
						Nightly processing of archive logs to detect and report performance regressions, or quantify quality of service for service level agreements or management reports, or produce advance warning of pending performance problems
					</div></li><li class="listitem"><div class="para">
						Strategic performance management, for example, detection of slightly abnormal to chronic system behavior, trend analysis, and capacity planning
					</div></li></ul></div><div class="para">
				<a id="IG31371888179" class="indexterm"></a>The <code class="command">pmie</code> expressions are described in a language with expressive power and operational flexibility. It includes the following operators and functions:
			</div><div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem"><div class="para">
						Generalized predicate-action pairs, where a predicate is a logical expression over the available performance metrics, and the action is arbitrary. Predefined actions include the following:
					</div><div class="itemizedlist"><ul><li class="listitem"><div class="para">
								<a id="IG31371888180" class="indexterm"></a>Launch a visible alarm with <code class="literal">pmconfirm</code>; see the <code class="command">pmconfirm(1)</code> man page.
							</div></li><li class="listitem"><div class="para">
								<a id="IG31371888181" class="indexterm"></a><a id="IG31371888182" class="indexterm"></a>Post an entry to the system log file; see the <code class="command">syslog(3)</code> man page.
							</div></li><li class="listitem"><div class="para">
								<a id="IG31371888183" class="indexterm"></a>Post an entry to the PCP noticeboard file <code class="filename">${PCP_LOG_DIR}/NOTICES</code>; see the <code class="command">pmpost(1)</code> man page.
							</div></li><li class="listitem"><div class="para">
								Execute a shell command or script, for example, to send e-mail, initiate a pager call, warn the help desk, and so on.
							</div></li><li class="listitem"><div class="para">
								Echo a message on standard output; useful for scripts that generate reports from retrospective processing of PCP archive logs.
							</div></li></ul></div></li><li class="listitem"><div class="para">
						Arithmetic and logical expressions in a C-like syntax.
					</div></li><li class="listitem"><div class="para">
						Expression groups may have an independent evaluation frequency, to support both short-term and long-term monitoring.
					</div></li><li class="listitem"><div class="para">
						Canonical scale and rate conversion of performance metric values to provide sensible expression evaluation.
					</div></li><li class="listitem"><div class="para">
						Aggregation functions of <code class="literal">sum</code>, <code class="literal">avg</code>, <code class="literal">min</code>, and <code class="literal">max</code>, that may be applied to collections of performance metrics values clustered over multiple hosts, or multiple instances, or multiple consecutive samples in time.
					</div></li><li class="listitem"><div class="para">
						Universal and existential quantification, to handle expressions of the form “for every....” and “at least one...”.
					</div></li><li class="listitem"><div class="para">
						Percentile aggregation to handle statistical outliers, such as “for at least 80% of the last 20 samples, ...”.
					</div></li><li class="listitem"><div class="para">
						Macro processing to expedite repeated use of common subexpressions or specification components.
					</div></li><li class="listitem"><div class="para">
						Transparent operation against either live-feeds of performance metric values from PMCD on one or more hosts, or against PCP archive logs of previously accumulated performance metric values.
					</div></li></ul></div><div class="para">
				The power of <code class="command">pmie</code> may be harnessed to automate the most common of the deterministic system management functions that are responses to changes in system performance. For example, disable a batch stream if the DBMS transaction commit response time at the ninetieth percentile goes over two seconds, or stop accepting uploads and send e-mail to the <em class="replaceable">sysadmin</em> alias if free space in a storage system falls below five percent.
			</div><div class="para">
				Moreover, the power of <code class="command">pmie</code> can be directed towards the exceptional and sporadic performance problems. For example, if a network packet storm is expected, enable IP header tracing for ten seconds, and send e-mail to advise that data has been collected and is awaiting analysis. Or, if production batch throughput falls below 50 jobs per minute, activate a pager to the systems administrator on duty.
			</div><div class="para">
				<a id="IG31371888184" class="indexterm"></a><a id="IG31371888185" class="indexterm"></a>Obviously, <code class="command">pmie</code> customization is required to produce meaningful filtering and actions in each production environment. The <code class="command">pmieconf</code> tool provides a convenient customization method, allowing the user to generate parameterized <code class="command">pmie</code> rules for some of the more common performance scenarios.
			</div></div></div><ul xmlns="http://www.w3.org/1999/xhtml" class="docnav"><li class="previous"><a accesskey="p" href="LE10170-PARENT.html"><strong>Prev</strong>4.5. The pmstore Command</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="LE15993-PARENT.html"><strong>Next</strong>5.2. Basic pmie Usage</a></li></ul></div></div></div></div>
<footer xmlns="" class="global-footer is-typeset">
  <div class="row-parent">
    <div class="row">
      <section class="row__colspaced"><div class="colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter">
          <div class="col__module">
            <h4>Main Menu</h4>
            <ul>
              <li>
                <a href="/features.html">Features</a>
              </li>
              <li>
                <a href="/documentation.html">Documentation</a>
              </li>
              <li>
                <a class="download" href="/download.html">Download</a>
              </li>
            </ul>
          </div>
        </div><div class="colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter">
          <div class="col__module">
            <h4>Developers</h4>
            <ul>
              <li>
                <a href="http://git.pcp.io/bugzilla">Report a bug</a>
              </li>
              <li>
                <a href="/community.html">Contributing</a>
              </li>
              <li>
                <a href="/team.html">Team</a>
              </li>
            </ul>
          </div>
        </div><div class="colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter">
          <div class="col__module">
            <h4>About</h4>
            <ul>
              <li>
                <a href="/news.html">News</a>
              </li>
              <li>
                <a href="/testimonials.html">Testimonials</a>
              </li>
              <li>
                <a href="/faq.html">FAQ</a>
              </li>
              <li>
                <a href="/website.html">Website</a>
              </li>
            </ul>
          </div>
        </div><div class="colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter">
          <div class="col__module">
            <h4>Get Social</h4>
            <ul>
              <li>
                <a class="twitter" href="https://twitter.com/performancepcp" rel="external">Twitter</a>
              </li>
              <li>
                <a class="github" href="https://github.com/performancecopilot" rel="external">Github</a>
              </li>
            </ul>
          </div>
        </div></section>
    </div>
    <div class="row">
      <div class="colspan2-2">
        <p class="legal">
          Copyright 2000-2004 Silicon Graphics Inc, 2007-2010 Aconex, 2012-2015 Red Hat
        </p>
      </div>
    </div>
  </div>
</footer>
</body></html>