<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns:d="http://docbook.org/ns/docbook">2.2.4.2. The pmcd.conf File</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.2" /><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content="PCP-pcp-users-and-administrators-guide-3-en-US-2.0-2" /><link rel="home" href="index.html" title="Performance Co-Pilot™ User's and Administrator's Guide" /><link rel="up" href="id5190661.html" title="2.2.4. PMCD Options and Configuration Files" /><link rel="prev" href="id5190661.html" title="2.2.4. PMCD Options and Configuration Files" /><link rel="next" href="id5191707.html" title="2.2.4.3. Controlling Access to PMCD with pmcd.conf" /></head><body><p id="title"><a class="left" href="https://fedorahosted.org/publican"><img alt="Product Site" src="Common_Content/images//image_left.png" /></a><a class="right" href="https://fedorahosted.org/publican"><img alt="Documentation Site" src="Common_Content/images//image_right.png" /></a></p><ul class="docnav top"><li class="previous"><a accesskey="p" href="id5190661.html"><strong>Prev</strong></a></li><li class="home">pcp-users-and-administrators-guide</li><li class="next"><a accesskey="n" href="id5191707.html"><strong>Next</strong></a></li></ul><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="LE63226-PARENT">
      ⁠</a>2.2.4.2. The <code class="filename">pmcd.conf</code> File</h4></div></div></div><div class="para">
						<a id="ITch02-29" class="indexterm"></a>When the PMCD is invoked, it reads its configuration file, which is <code class="filename">${PCP_PMCDCONF_PATH}</code>. This file contains entries that specify the PMDAs used by this instance of the PMCD and which metrics are covered by these PMDAs. Also, you may specify access control rules in this file for the various hosts, users and groups on your network. This file is described completely in the <code class="command">pmcd(1)</code> man page.
					</div><div class="para">
						With standard PCP operation (even if you have not created and added your own PMDAs), you might need to edit this file in order to add any additional access control you wish to impose. If you do not add access control rules, all access for all operations is granted to the local host, and read-only access is granted to remote hosts. The <code class="filename">pmcd.conf</code> file is automatically generated during the software build process and on Linux, for example, is similar to the following:
					</div><pre class="literallayout"> Performance Metrics Domain Specifications
# 
# This file is automatically generated during the build
# Name  Id      IPC     IPC Params      File/Cmd
pmcd    2       dso     pmcd_init       ${PCP_PMDAS_DIR}/pmcd/pmda_pmcd.so
linux   60      dso     linux_init      ${PCP_PMDAS_DIR}/linux/pmda_linux.so
proc    3       pipe    binary          ${PCP_PMDAS_DIR}/proc/pmdaproc -d 3
xfs     11      pipe    binary          ${PCP_PMDAS_DIR}/xfs/pmdaxfs -d 11

[access]
disallow * : store;
allow localhost : all;</pre><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
							Even though PMCD does not run with <code class="literal">root</code> privileges, you must be very careful not to configure PMDAs in this file if you are not sure of their action. This is because all PMDAs are initially started as <code class="literal">root</code> (allowing them to assume alternate identities, such as <code class="literal">postgres</code> for example), after which <code class="command">pmcd</code> drops its privileges. Pay close attention that permissions on this file are not inadvertently downgraded to allow public write access.
						</div></div></div><div class="para">
						Each entry in this configuration file contains rules that specify how to connect the PMCD to a particular PMDA and which metrics the PMDA monitors. A PMDA may be attached as a Dynamic Shared Object (DSO) or by using a socket or a pair of pipes. The distinction between these attachment methods is described below.
					</div><div class="para">
						An entry in the <code class="filename">pmcd.conf</code> file looks like this:
					</div><pre class="literallayout"><em class="replaceable">label_name</em>   <em class="replaceable">domain_number</em>   <em class="replaceable">type</em>   <em class="replaceable">path</em></pre><div class="para">
						The <em class="replaceable">label_name</em> field specifies a name for the PMDA. The <em class="replaceable">domain_number</em> is an integer value that specifies a domain of metrics for the PMDA. The <em class="replaceable">type</em> field indicates the type of entry (DSO, socket, or pipe). The <em class="replaceable"> path</em> field is for additional information, and varies according to the type of entry.
					</div><div class="para">
						The following rules are common to DSO, socket, and pipe syntax:
					</div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="replaceable">label_name</em></span></dt><dd><div class="para">
									An alphanumeric string identifying the agent.
								</div></dd><dt><span class="term"><em class="replaceable">domain_number</em></span></dt><dd><div class="para">
									An unsigned integer specifying the agent's domain.
								</div></dd></dl></div><div class="para">
						DSO entries follow this syntax:
					</div><pre class="synopsis"><em class="replaceable">label_name</em> <em class="replaceable">domain_number</em> dso <em class="replaceable">entry-point</em> <em class="replaceable">path</em></pre><div class="para">
						The following rules apply to the DSO syntax:
					</div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">dso</code></span></dt><dd><div class="para">
									The entry type.
								</div></dd><dt><span class="term"><em class="replaceable">entry-point</em></span></dt><dd><div class="para">
									The name of an initialization function called when the DSO is loaded.
								</div></dd><dt><span class="term"><em class="replaceable">path</em></span></dt><dd><div class="para">
									Designates the location of the DSO. An absolute path must be used. On most platforms this will be a <code class="literal">so</code> suffixed file, on Windows it is a <code class="literal">dll</code>, and on Mac OS X it is a <code class="literal">dylib</code> file.
								</div></dd></dl></div><div class="para">
						Socket entries in the <code class="filename">pmcd.conf</code> file follow this syntax:
					</div><pre class="synopsis"><em class="replaceable">label_name</em> <em class="replaceable">domain_number</em> socket <em class="replaceable">addr_family</em> <em class="replaceable">address</em> <em class="replaceable">command</em> [<span class="optional"><em class="replaceable">args</em></span>] </pre><div class="para">
						The following rules apply to the socket syntax:
					</div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">socket</code></span></dt><dd><div class="para">
									The entry type.
								</div></dd><dt><span class="term"><em class="replaceable">addr_family</em></span></dt><dd><div class="para">
									Specifies if the socket is <code class="literal">AF_INET</code>, <code class="literal">AF_IPV6</code> or <code class="literal">AF_UNIX</code>. If the socket is <code class="literal">INET</code>, the word <code class="literal">inet</code> appears in this place. If the socket is <code class="literal">IPV6</code>, the word <code class="literal">ipv6</code> appears in this place. If the socket is <code class="literal">UNIX</code>, the word <code class="literal">unix</code> appears in this place.
								</div></dd><dt><span class="term"><em class="replaceable">address</em></span></dt><dd><div class="para">
									Specifies the address of the socket. For INET or IPv6 sockets, this is a port number or port name. For UNIX sockets, this is the name of the PMDA's socket on the local host.
								</div></dd><dt><span class="term"><em class="replaceable">command</em></span></dt><dd><div class="para">
									Specifies a command to start the PMDA when the PMCD is invoked and reads the configuration file.
								</div></dd><dt><span class="term"><em class="replaceable">args</em></span></dt><dd><div class="para">
									Optional arguments for <em class="replaceable">command</em>.
								</div></dd></dl></div><div class="para">
						Pipe entries in the <code class="filename">pmcd.conf</code> file follow this syntax:
					</div><pre class="synopsis"><em class="replaceable">label_name</em> <em class="replaceable">domain_number</em> pipe <em class="replaceable">protocol</em> <em class="replaceable">command</em> [<span class="optional"><em class="replaceable">args</em></span>]</pre><div class="para">
						The following rules apply to the pipe syntax:
					</div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">pipe</code></span></dt><dd><div class="para">
									The entry type.
								</div></dd><dt><span class="term"><em class="replaceable">protocol</em></span></dt><dd><div class="para">
									Specifies whether a text-based or a binary PCP protocol should be used over the pipes. Historically, this parameter was able to be “text” or “binary.” The text-based protocol has long since been deprecated and removed, however, so nowadays “binary” is the only valid value here.
								</div></dd><dt><span class="term"><em class="replaceable">command</em></span></dt><dd><div class="para">
									Specifies a command to start the PMDA when the PMCD is invoked and reads the configuration file.
								</div></dd><dt><span class="term"><em class="replaceable">args</em></span></dt><dd><div class="para">
									Optional arguments for <em class="replaceable">command</em>.
								</div></dd></dl></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="id5190661.html"><strong>Prev</strong>2.2.4. PMCD Options and Configuration Files</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="id5191707.html"><strong>Next</strong>2.2.4.3. Controlling Access to PMCD with pmcd.conf</a></li></ul></body></html>