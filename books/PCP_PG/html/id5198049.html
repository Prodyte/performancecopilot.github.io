<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns:d="http://docbook.org/ns/docbook">3.3. Current PMAPI Context</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.2" /><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content="PCP-pcp-programmers-guide-3-en-US-4.0-4" /><link rel="home" href="index.html" title="Performance Co-Pilot™ Programmer's Guide" /><link rel="up" href="LE97135-PARENT.html" title="Chapter 3. PMAPI--The Performance Metrics API" /><link rel="prev" href="id5197718.html" title="3.2. Performance Metric Instances" /><link rel="next" href="LE11914-PARENT.html" title="3.4. Performance Metric Descriptions" /></head><body><p id="title"><a class="left" href="https://fedorahosted.org/publican"><img alt="Product Site" src="Common_Content/images//image_left.png" /></a><a class="right" href="https://fedorahosted.org/publican"><img alt="Documentation Site" src="Common_Content/images//image_right.png" /></a></p><ul class="docnav top"><li class="previous"><a accesskey="p" href="id5197718.html"><strong>Prev</strong></a></li><li class="home">pcp-programmers-guide</li><li class="next"><a accesskey="n" href="LE11914-PARENT.html"><strong>Next</strong></a></li></ul><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="id5198049">
      ⁠</a>3.3. Current PMAPI Context</h2></div></div></div><div class="para">
				<a id="IG31340177265" class="indexterm"></a>When performance metrics are retrieved across the PMAPI, they are delivered in the context of a particular source of metrics, a point in time, and a profile of desired instances. This means that the application making the request has already negotiated across the PMAPI to establish the context in which the request should be executed.
			</div><div class="para">
				<a id="IG31340177266" class="indexterm"></a>A metric's source may be the current performance data from a particular host (a live or real-time source), or a set of archive logs of performance data collected by <code class="command">pmlogger</code> at some remote host or earlier time (a retrospective or archive source). The metric's source is specified when the PMAPI context is created by calling the <code class="command">pmNewContext</code> function. This function returns an opaque handle which can be used to identify the context.
			</div><div class="para">
				<a id="IG31340177267" class="indexterm"></a>The collection time for a performance metric is always the current time of day for a real-time source, or current position for an archive source. For archives, the collection time may be set to an arbitrary time within the bounds of the set of archive logs by calling the <code class="command">pmSetMode</code> function.
			</div><div class="para">
				The last component of a PMAPI context is an instance profile that may be used to control which particular instances from an instance domain should be retrieved. When a new PMAPI context is created, the initial state expresses an interest in all possible instances, to be collected at the current time. The instance profile can be manipulated using the <code class="command">pmAddProfile</code> and <code class="command">pmDelProfile</code> functions.
			</div><div class="para">
				The current context can be changed by passing a context handle to <code class="command">pmUseContext</code>. If a live context connection fails, the <code class="command">pmReconnectContext</code> function can be used to attempt to reconnect it.
			</div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="id5197718.html"><strong>Prev</strong>3.2. Performance Metric Instances</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="LE11914-PARENT.html"><strong>Next</strong>3.4. Performance Metric Descriptions</a></li></ul></body></html>