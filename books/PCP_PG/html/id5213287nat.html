<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns:d="http://docbook.org/ns/docbook">4.3. MMV PMDA Design</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.2" /><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content="PCP-pcp-programmers-guide-3-en-US-4.0-4" /><link rel="home" href="index.html" title="Performance Co-Pilot™ Programmer's Guide" /><link rel="up" href="LE25915-PARENT.html" title="Chapter 4. Instrumenting Applications" /><link rel="prev" href="id5213104.html" title="4.2. Performance Instrumentation and Sampling" /><link rel="next" href="id5213288nat.html" title="4.4. Memory Mapped Values API" /></head><body><p id="title"><a class="left" href="https://fedorahosted.org/publican"><img alt="Product Site" src="Common_Content/images//image_left.png" /></a><a class="right" href="https://fedorahosted.org/publican"><img alt="Documentation Site" src="Common_Content/images//image_right.png" /></a></p><ul class="docnav top"><li class="previous"><a accesskey="p" href="id5213104.html"><strong>Prev</strong></a></li><li class="home">pcp-programmers-guide</li><li class="next"><a accesskey="n" href="id5213288nat.html"><strong>Next</strong></a></li></ul><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="id5213287nat">
      ⁠</a>4.3. MMV PMDA Design</h2></div></div></div><div class="para">
				<a id="IG31340177470nat" class="indexterm"></a>An application instrumented with memory mapped values directly updates the memory that backs the metric values it exports. The MMV PMDA reads those values directly, from the <code class="literal">same</code> memory that the application is updating, when current values are sampled on behalf of PMAPI client tools. This relationship, and a simplified MMV API, are shown in <a class="xref" href="id5213287nat.html#id5214410nat">Figure 4.2, “Memory Mapped Page Sharing”</a>.
			</div><div class="para">
				<div class="figure"><a id="id5214410nat">
      ⁠</a><div class="figure-contents"><div class="mediaobject"><object data="images/pmdammv.svg" type="image/svg+xml"><img src="images/pmdammv.png" alt="" /></object></div></div><p class="title"><strong>Figure 4.2. Memory Mapped Page Sharing</strong></p></div>

			</div><div class="para">
				It is worth noting that once the metrics of an application have been registered via the <code class="filename">pcp_mmv</code> library initialisation API, subsequent interactions with the library are not intrusive to the instrumented application. At the points where values are updated, the only cost involved is the memory mapping update, which is a single memory store operation. There is no need to explicitly transfer control to the MMV PMDA, nor allocate memory, nor make system or library calls. The PMDA will only sample the values at times driven by PMAPI client tools, and this places no overhead on the instrumented application.
			</div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="id5213104.html"><strong>Prev</strong>4.2. Performance Instrumentation and Sampling</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="id5213288nat.html"><strong>Next</strong>4.4. Memory Mapped Values API</a></li></ul></body></html>