<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns:d="http://docbook.org/ns/docbook">1.3.2. Building a PMDA</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.2" /><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content="PCP-pcp-programmers-guide-3-en-US-4.0-4" /><link rel="home" href="index.html" title="Performance Co-Pilot™ Programmer's Guide" /><link rel="up" href="LE16056-PARENT.html" title="1.3. PMDA Development" /><link rel="prev" href="LE16056-PARENT.html" title="1.3. PMDA Development" /><link rel="next" href="id5178384.html" title="1.3.2.2. Daemon Process Method" /></head><body><p id="title"><a class="left" href="https://fedorahosted.org/publican"><img alt="Product Site" src="Common_Content/images//image_left.png" /></a><a class="right" href="https://fedorahosted.org/publican"><img alt="Documentation Site" src="Common_Content/images//image_right.png" /></a></p><ul class="docnav top"><li class="previous"><a accesskey="p" href="LE16056-PARENT.html"><strong>Prev</strong></a></li><li class="home">pcp-programmers-guide</li><li class="next"><a accesskey="n" href="id5178384.html"><strong>Next</strong></a></li></ul><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id5178242">
      ⁠</a>1.3.2. Building a PMDA</h3></div></div></div><div class="para">
					A PMDA interacts with PMCD across one of several well-defined interfaces and protocol mechanisms. These implementation options are described in the <em class="citetitle">Performance Co-Pilot User's and Administrator's Guide</em>.
				</div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
						It is strongly recommended that code for a new PMDA be based on the source of one of the existing PMDAs below the <code class="filename">${PCP_PMDAS_DIR}</code> directory.
					</div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="id5178295">
      ⁠</a>1.3.2.1. In-Process (DSO) Method</h4></div></div></div><div class="para">
						<a id="IG3134017745" class="indexterm"></a> <a id="IG3134017746" class="indexterm"></a> <a id="IG3134017747" class="indexterm"></a> <a id="IG3134017748" class="indexterm"></a> <a id="IG3134017749" class="indexterm"></a>This method of building a PMDA uses a Dynamic Shared Object (DSO) that is attached by PMCD, using the platform-specific shared library manipulation interfaces such as <code class="command">dlopen(3)</code>, at initialization time. This is the highest performance option (there is no context switching and no interprocess communication (IPC) between the PMCD and the PMDA), but is operationally intractable in some situations. For example, difficulties arise where special access permissions are required to read the instrumentation behind the performance metrics (<code class="command">pmcd</code> does not run as root), or where the performance metrics are provided by an existing process with a different protocol interface. The DSO PMDA effectively executes as part of PMCD; so great care is required when crafting a PMDA in this manner. Calls to <code class="command">exit(1)</code> in the PMDA, or a library it uses, would cause PMCD to exit and end monitoring of that host. Other implications are discussed in <a class="xref" href="id5188840.html">Section 2.2.3, “Daemon PMDA”</a>.
					</div></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="LE16056-PARENT.html"><strong>Prev</strong>1.3. PMDA Development</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="id5178384.html"><strong>Next</strong>1.3.2.2. Daemon Process Method</a></li></ul></body></html>