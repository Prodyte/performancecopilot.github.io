<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/TR/xhtml1/transitional" xmlns:fo="http://www.w3.org/1999/XSL/Format"><head xmlns="http://www.w3.org/1999/xhtml"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns:d="http://docbook.org/ns/docbook">Chapter 3. PMAPI--The Performance Metrics API</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.2" /><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content="PCP-pcp-programmers-guide-3-en-US-4.0-4" /><link rel="home" href="index.html" title="Performance Co-Pilot™ Programmer's Guide" /><link rel="up" href="index.html" title="Performance Co-Pilot™ Programmer's Guide" /><link rel="prev" href="id5197301.html" title="2.8.3. Configuring PCP Tools" /><link rel="next" href="id5197718.html" title="3.2. Performance Metric Instances" />
<meta xmlns="" charset="utf-8" />
<meta xmlns="" content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" />
<meta xmlns="" content="initial-scale=1" name="viewport" />
<title xmlns="">Performance Co-Pilot</title>
<link xmlns="" href="/assets/css/screen.css" media="all" rel="stylesheet" type="text/css" />
<link xmlns="" href="/assets/css/master.css" media="all" rel="stylesheet" type="text/css" />
<link xmlns="" href="/images/pcp.ico" rel="shortcut icon" type="image/ico" />
</head><body>
    <header xmlns="" class="global-header">
      <div class="row">
        <h1 class="global-logo colspan12-6 colspan8-4 colspan6-3 colspan2-1 as-grid">
          <a href="/index.html">Performance Co-Pilot</a>
        </h1>
        <nav class="global-header__navigation colspan12-6 colspan8-6 colspan6-4 colspan2-1 as-grid">
          <ul>
            <li>
              <a href="/features.html">Features</a>
            </li>
            <li>
              <a href="/documentation.html">Documentation</a>
            </li>
            <li>
              <a href="/download.html">Download</a>
            </li>
            <li>
              <a href="/community.html">Get Involved</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
<div class="site-content"><div class="how-to is-typeset"><div class="row-parent"><div class="row"><p xmlns="http://www.w3.org/1999/xhtml" id="title"><a class="left" href="https://pcp.io"><img alt="Product Site" src="Common_Content/images//image_left.png" /></a><a class="right" href="https://pcp.io/documentation.html"><img alt="Documentation Site" src="Common_Content/images//image_right.png" /></a></p><ul xmlns="http://www.w3.org/1999/xhtml" class="docnav top"><li class="previous"><a accesskey="p" href="id5197301.html"><strong>Prev</strong></a></li><li class="home">pcp-programmers-guide</li><li class="next"><a accesskey="n" href="id5197718.html"><strong>Next</strong></a></li></ul><div xmlns="http://www.w3.org/1999/xhtml" class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="LE97135-PARENT">
      ⁠</a>Chapter 3. PMAPI--The Performance Metrics API</h1></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="section"><a href="LE97135-PARENT.html#LE87626-PARENT">3.1. Naming and Identifying Performance Metrics</a></span></dt><dt><span class="section"><a href="id5197718.html">3.2. Performance Metric Instances</a></span></dt><dt><span class="section"><a href="id5198049.html">3.3. Current PMAPI Context</a></span></dt><dt><span class="section"><a href="LE11914-PARENT.html">3.4. Performance Metric Descriptions</a></span></dt><dt><span class="section"><a href="LE82331-PARENT.html">3.5. Performance Metrics Values</a></span></dt><dt><span class="section"><a href="id5199202.html">3.6. Performance Event Metrics</a></span></dt><dd><dl><dt><span class="section"><a href="id5199202.html#id5199203nat">3.6.1. Event Monitor Considerations</a></span></dt><dt><span class="section"><a href="id5199204nat.html">3.6.2. Event Collector Considerations</a></span></dt></dl></dd><dt><span class="section"><a href="id5199203.html">3.7. PMAPI Programming Style and Interaction</a></span></dt><dd><dl><dt><span class="section"><a href="id5199203.html#LE37655-PARENT">3.7.1. Variable Length Argument and Results Lists</a></span></dt><dt><span class="section"><a href="ch03s07s02.html">3.7.2. Python Specific Issues</a></span></dt><dt><span class="section"><a href="LE62826-PARENT.html">3.7.3. PMAPI Error Handling</a></span></dt></dl></dd><dt><span class="section"><a href="id5199561.html">3.8. PMAPI Procedural Interface</a></span></dt><dd><dl><dt><span class="section"><a href="id5199561.html#LE32034-PARENT">3.8.1. PMAPI Name Space Services</a></span></dt><dt><span class="section"><a href="LE89521-PARENT.html">3.8.2. PMAPI Metrics Description Services</a></span></dt><dt><span class="section"><a href="LE27200-PARENT.html">3.8.3. PMAPI Instance Domain Services</a></span></dt><dt><span class="section"><a href="LE94187-PARENT.html">3.8.4. PMAPI Context Services</a></span></dt><dt><span class="section"><a href="LE34685-PARENT.html">3.8.5. PMAPI Timezone Services</a></span></dt><dt><span class="section"><a href="LE25844-PARENT.html">3.8.6. PMAPI Metrics Services</a></span></dt><dt><span class="section"><a href="fetchgroup.html">3.8.7. PMAPI Fetchgroup Services</a></span></dt><dt><span class="section"><a href="LE40692-PARENT.html">3.8.8. PMAPI Record-Mode Services</a></span></dt><dt><span class="section"><a href="LE85604-PARENT.html">3.8.9. PMAPI Archive-Specific Services</a></span></dt><dt><span class="section"><a href="LE73955-PARENT.html">3.8.10. PMAPI Time Control Services</a></span></dt><dt><span class="section"><a href="LE44064-PARENT.html">3.8.11. PMAPI Ancillary Support Services</a></span></dt></dl></dd><dt><span class="section"><a href="id5212196.html">3.9. PMAPI Programming Issues and Examples</a></span></dt><dd><dl><dt><span class="section"><a href="id5212196.html#id5212297">3.9.1. Symbolic Association between a Metric's Name and Value</a></span></dt><dt><span class="section"><a href="id5212519.html">3.9.2. Initializing New Metrics</a></span></dt><dt><span class="section"><a href="id5212595.html">3.9.3. Iterative Processing of Values</a></span></dt><dt><span class="section"><a href="id5212682.html">3.9.4. Accommodating Program Evolution</a></span></dt><dt><span class="section"><a href="id5212805.html">3.9.5. Handling PMAPI Errors</a></span></dt><dt><span class="section"><a href="id5212855.html">3.9.6. Compiling and Linking PMAPI Applications</a></span></dt></dl></dd></dl></div><div class="para">
			<a id="IG31340177256" class="indexterm"></a> <a id="IG31340177257" class="indexterm"></a>This chapter describes the Performance Metrics Application Programming Interface (PMAPI) provided with Performance Co-Pilot (PCP).
		</div><div class="para">
			<a id="IG31340177258" class="indexterm"></a>The PMAPI is a set of functions and data structure definitions that allow client applications to access performance data from one or more Performance Metrics Collection Daemons (PMCDs) or from PCP archive logs. The PCP utilities are all written using the PMAPI.
		</div><div class="para">
			The most common use of PCP includes running performance monitoring utilities on a workstation (the monitoring system) while performance data is retrieved from one or more remote collector systems by a number of PCP processes. These processes execute on both the monitoring system and the collector systems. The collector systems are typically servers, and are the targets for the performance investigations.
		</div><div class="para">
			In the development of the PMAPI the most important question has been, “How easily and quickly will this API enable the user to build new performance tools, or exploit existing tools for newly available performance metrics?” The PMAPI and the standard tools that use the PMAPI have enjoyed a symbiotic evolution throughout the development of PCP.
		</div><div class="para">
			It will be convenient to differentiate between code that uses the PMAPI and code that implements the services of the PMAPI. The former will be termed “above the PMAPI” and the latter “below the PMAPI.”
		</div><div class="section"><div class="titlepage"><div><div keep-together.within-column="always"><h2 class="title"><a id="LE87626-PARENT">
      ⁠</a>3.1. Naming and Identifying Performance Metrics</h2></div></div></div><div class="para">
				<a id="IG31340177259" class="indexterm"></a> <a id="IG31340177260" class="indexterm"></a> <a id="IG31340177261" class="indexterm"></a>Across all of the supported performance metric domains, there are a large number of performance metrics. Each metric has its own description, format, and semantics. PCP presents a uniform interface to these metrics above the PMAPI, independent of the source of the underlying metric data. For example, the performance metric <code class="literal">hinv.physmem</code> has a single 32-bit unsigned integer value, representing the number of megabytes of physical memory in the system, while the performance metric <code class="literal">disk.dev.total</code> has one 32-bit unsigned integer value per disk spindle, representing the cumulative count of I/O operations involving each associated disk spindle. These concepts are described in greater detail in <a class="xref" href="LE97285-PARENT.html">Section 2.3, “Domains, Metrics, Instances and Labels”</a>.
			</div><div class="para">
				For brevity and efficiency, internally PCP avoids using names for performance metrics, and instead uses an identification scheme that unambiguously associates a single integer with each known performance metric. This integer is known as a Performance Metric Identifier, or PMID. For functions using the PMAPI, a PMID is defined and manipulated with the typedef <code class="literal">pmID</code>.
			</div><div class="para">
				Below the PMAPI, the integer value of the PMID has an internal structure that reflects the details of the PMCD and PMDA architecture, as described in <a class="xref" href="LE98565-PARENT.html">Section 2.3.3, “Metrics”</a>.
			</div><div class="para">
				Above the PMAPI, a Performance Metrics Name Space (PMNS) is used to provide a hierarchic classification of external metric names, and a one-to-one mapping of external names to internal PMIDs. A more detailed description of the PMNS can be found in the <em class="citetitle">Performance Co-Pilot User's and Administrator's Guide</em>.
			</div><div class="para">
				The default PMNS comes from the performance metrics source, either a PMCD process or a PCP archive. This PMNS always reflects the available metrics from the performance metrics source
			</div></div></div><ul xmlns="http://www.w3.org/1999/xhtml" class="docnav"><li class="previous"><a accesskey="p" href="id5197301.html"><strong>Prev</strong>2.8.3. Configuring PCP Tools</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="id5197718.html"><strong>Next</strong>3.2. Performance Metric Instances</a></li></ul></div></div></div></div>
<footer xmlns="" class="global-footer is-typeset">
  <div class="row-parent">
    <div class="row">
      <section class="row__colspaced"><div class="colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter">
          <div class="col__module">
            <h4>Main Menu</h4>
            <ul>
              <li>
                <a href="/features.html">Features</a>
              </li>
              <li>
                <a href="/documentation.html">Documentation</a>
              </li>
              <li>
                <a class="download" href="/download.html">Download</a>
              </li>
            </ul>
          </div>
        </div><div class="colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter">
          <div class="col__module">
            <h4>Developers</h4>
            <ul>
              <li>
                <a href="http://git.pcp.io/bugzilla">Report a bug</a>
              </li>
              <li>
                <a href="/community.html">Contributing</a>
              </li>
              <li>
                <a href="/team.html">Team</a>
              </li>
            </ul>
          </div>
        </div><div class="colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter">
          <div class="col__module">
            <h4>About</h4>
            <ul>
              <li>
                <a href="/news.html">News</a>
              </li>
              <li>
                <a href="/testimonials.html">Testimonials</a>
              </li>
              <li>
                <a href="/faq.html">FAQ</a>
              </li>
              <li>
                <a href="/website.html">Website</a>
              </li>
            </ul>
          </div>
        </div><div class="colspan12-3 colspan8-2 colspan6-2 colspan2-2 as-grid with-gutter">
          <div class="col__module">
            <h4>Get Social</h4>
            <ul>
              <li>
                <a class="twitter" href="https://twitter.com/performancepcp" rel="external">Twitter</a>
              </li>
              <li>
                <a class="github" href="https://github.com/performancecopilot" rel="external">Github</a>
              </li>
            </ul>
          </div>
        </div></section>
    </div>
    <div class="row">
      <div class="colspan2-2">
        <p class="legal">
          Copyright 2000-2004 Silicon Graphics Inc, 2007-2010 Aconex, 2012-2015 Red Hat
        </p>
      </div>
    </div>
  </div>
</footer>
</body></html>