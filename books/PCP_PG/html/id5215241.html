<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns:d="http://docbook.org/ns/docbook">4.7.4. Configuring the Trace Library</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css" /><link rel="stylesheet" media="print" href="Common_Content/css/print.css" type="text/css" /><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.2" /><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content="PCP-pcp-programmers-guide-3-en-US-4.0-4" /><link rel="home" href="index.html" title="Performance Co-Pilot™ Programmer's Guide" /><link rel="up" href="LE26087-PARENT.html" title="4.7. Trace API" /><link rel="prev" href="id5214931.html" title="4.7.3. Observations and Counters" /><link rel="next" href="LE54271-PARENT.html" title="Appendix A. Acronyms" /></head><body><p id="title"><a class="left" href="https://fedorahosted.org/publican"><img alt="Product Site" src="Common_Content/images//image_left.png" /></a><a class="right" href="https://fedorahosted.org/publican"><img alt="Documentation Site" src="Common_Content/images//image_right.png" /></a></p><ul class="docnav top"><li class="previous"><a accesskey="p" href="id5214931.html"><strong>Prev</strong></a></li><li class="home">pcp-programmers-guide</li><li class="next"><a accesskey="n" href="LE54271-PARENT.html"><strong>Next</strong></a></li></ul><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="id5215241">
      ⁠</a>4.7.4. Configuring the Trace Library</h3></div></div></div><div class="para">
					<a id="IG31340177521" class="indexterm"></a> <a id="IG31340177522" class="indexterm"></a> <a id="IG31340177523" class="indexterm"></a> <a id="IG31340177524" class="indexterm"></a>The trace library is configurable through the use of environment variables listed in <a class="xref" href="id5215241.html#id5215299">Table 4.5, “Environment Variables”</a> as well as through the state flags listed in <a class="xref" href="id5215241.html#id5215745">Table 4.6, “State Flags”</a>. Both provide diagnostic output and enable or disable the configurable functionality within the library.
				</div><div class="table"><a id="id5215299">
      ⁠</a><p class="title"><strong>Table 4.5. Environment Variables</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Environment Variables"><colgroup><col width="38%" /><col width="62%" /></colgroup><thead><tr valign="top"><th align="left" valign="bottom"> <div class="para">
									Name
								</div>
								 </th><th align="left" valign="bottom"> <div class="para">
									Description
								</div>
								 </th></tr></thead><tbody><tr valign="top"><td align="left" valign="top"> <div class="para">
									<code class="literal">PCP_TRACE_HOST</code> <a id="IG31340177525" class="indexterm"></a>
								</div>
								 </td><td align="left" valign="top"> <div class="para">
									The name of the host where the trace PMDA is running.
								</div>
								 </td></tr><tr valign="top"><td align="left" valign="top"> <div class="para">
									<code class="literal">PCP_TRACE_PORT</code> <a id="IG31340177526" class="indexterm"></a>
								</div>
								 </td><td align="left" valign="top"> <div class="para">
									<a id="IG31340177527" class="indexterm"></a> TCP/IP port number on which the trace PMDA is accepting client connections.
								</div>
								 </td></tr><tr valign="top"><td align="left" valign="top"> <div class="para">
									<code class="literal">PCP_TRACE_TIMEOUT</code> <a id="IG31340177528" class="indexterm"></a>
								</div>
								 </td><td align="left" valign="top"> <div class="para">
									The number of seconds to wait until assuming that the initial connection is not going to be made, and timeout will occur. The default is three seconds.
								</div>
								 </td></tr><tr valign="top"><td align="left" valign="top"> <div class="para">
									<code class="literal">PCP_TRACE_REQTIMEOUT</code> <a id="IG31340177529" class="indexterm"></a>
								</div>
								 </td><td align="left" valign="top"> <div class="para">
									<a id="IG31340177530" class="indexterm"></a> The number of seconds to allow before timing out on awaiting acknowledgment from the trace PMDA after trace data has been sent to it. This variable has no effect in the asynchronous trace protocol (refer to <a class="xref" href="id5215241.html#id5215745">Table 4.6, “State Flags”</a>).
								</div>
								 </td></tr><tr valign="top"><td align="left" valign="top"> <div class="para">
									<code class="literal">PCP_TRACE_RECONNECT</code> <a id="IG31340177531" class="indexterm"></a>
								</div>
								 </td><td align="left" valign="top"> <div class="para">
									A list of values which represents the backoff approach that the <code class="filename">libpcp_trace</code> library routines take when attempting to reconnect to the trace PMDA after a connection has been lost. The list of values should be a positive number of seconds for the application to delay before making the next reconnection attempt. When the final value in the list is reached, that value is used for all subsequent reconnection attempts.
								</div>
								 </td></tr></tbody></table></div></div><div class="para">
					<a id="IG31340177532" class="indexterm"></a> <a id="IG31340177533" class="indexterm"></a> <a id="IG31340177534" class="indexterm"></a> <a id="IG31340177535" class="indexterm"></a>The <a class="xref" href="id5215241.html#id5215745">Table 4.6, “State Flags”</a> are used to customize the operation of the <code class="filename">libpcp_trace</code> routines. These are registered through the <code class="command">pmtracestate</code> call, and they can be set either individually or together.
				</div><div class="table"><a id="id5215745">
      ⁠</a><p class="title"><strong>Table 4.6. State Flags</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols gt-7-rows" summary="State Flags"><colgroup><col width="43%" /><col width="57%" /></colgroup><thead><tr valign="top"><th align="left" valign="bottom"> <div class="para">
									Flag
								</div>
								 </th><th align="left" valign="bottom"> <div class="para">
									Description
								</div>
								 </th></tr></thead><tbody><tr valign="top"><td align="left" valign="top"> <div class="para">
									<code class="literal">PMTRACE_STATE_NONE<a id="IG31340177536" class="indexterm"></a></code>
								</div>
								 </td><td align="left" valign="top"> <div class="para">
									<a id="IG31340177537" class="indexterm"></a> The default. No state flags have been set, the fault-tolerant, synchronous protocol is used for communicating with the trace PMDA, and no diagnostic messages are displayed by the <code class="filename"></code><code class="filename">libpcp_trace</code> routines.
								</div>
								 </td></tr><tr valign="top"><td align="left" valign="top"> <div class="para">
									<code class="literal">PMTRACE_STATE_API<a id="IG31340177538" class="indexterm"></a></code>
								</div>
								 </td><td align="left" valign="top"> <div class="para">
									High-level diagnostics. This flag simply displays entry into each of the API routines.
								</div>
								 </td></tr><tr valign="top"><td align="left" valign="top"> <div class="para">
									<code class="literal">PMTRACE_STATE_COMMS<a id="IG31340177539" class="indexterm"></a></code>
								</div>
								 </td><td align="left" valign="top"> <div class="para">
									Diagnostic messages related to establishing and maintaining the communication channel between application and PMDA.
								</div>
								 </td></tr><tr valign="top"><td align="left" valign="top"> <div class="para">
									<code class="literal">PMTRACE_STATE_PDU<a id="IG31340177540" class="indexterm"></a> <a id="IG31340177541" class="indexterm"></a></code>
								</div>
								 </td><td align="left" valign="top"> <div class="para">
									<a id="IG31340177542" class="indexterm"></a> The low-level details of the trace protocol data units (PDU) is displayed as each PDU is transmitted or received.
								</div>
								 </td></tr><tr valign="top"><td align="left" valign="top"> <div class="para">
									<code class="literal">PMTRACE_STATE_PDUBUF<a id="IG31340177543" class="indexterm"></a></code>
								</div>
								 </td><td align="left" valign="top"> <div class="para">
									The full contents of the PDU buffers are dumped as PDUs are transmitted and received.
								</div>
								 </td></tr><tr valign="top"><td align="left" valign="top"> <div class="para">
									<code class="literal">PMTRACE_STATE_NOAGENT<a id="IG31340177544" class="indexterm"></a></code>
								</div>
								 </td><td align="left" valign="top"> <div class="para">
									<a id="IG31340177545" class="indexterm"></a> <a id="IG31340177546" class="indexterm"></a> Interprocess communication control. If this flag is set, it causes interprocess communication between the instrumented application and the trace PMDA to be skipped. This flag is a debugging aid for applications using <code class="filename">libpcp_trace</code>.
								</div>
								 </td></tr><tr valign="top"><td align="left" valign="top"> <div class="para">
									<code class="literal">PMTRACE_STATE_ASYNC<a id="IG31340177547" class="indexterm"></a></code>
								</div>
								 </td><td align="left" valign="top"> <div class="para">
									<a id="IG31340177548" class="indexterm"></a> <a id="IG31340177549" class="indexterm"></a> Asynchronous trace protocol. This flag enables the asynchronous trace protocol so that the application does not block awaiting acknowledgment PDUs from the trace PMDA. In order for the flag to be effective, it must be set before using the other <code class="filename"></code><code class="filename">libpcp_trace</code> entry points.
								</div>
								 </td></tr></tbody></table></div></div></div><ul class="docnav"><li class="previous"><a accesskey="p" href="id5214931.html"><strong>Prev</strong>4.7.3. Observations and Counters</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="LE54271-PARENT.html"><strong>Next</strong>Appendix A. Acronyms</a></li></ul></body></html>